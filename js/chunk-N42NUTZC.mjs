import{l as F}from"chunk-CMAEAGWD.mjs";import{c as h,d as T,da as v,w as D}from"chunk-EEV263O3.mjs";import{a as b}from"chunk-YOOGIIWU.mjs";var R=new Map([["gif","image/gif"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["png","image/png"],["apng","image/png"],["svg","image/svg+xml"],["webp","image/webp"]]),E=new Set,u=new Set,g=(()=>{let t=new Map;for(let[e,o]of R.entries())u.has(o)||t.set(o,e),E.add(e),u.add(o);return t})(),_=[...E],y=[...u];var M="clipboard-copy";async function S(t){if(navigator.clipboard)return navigator.clipboard.writeText(t).catch(function(r){throw r!==void 0?r:new DOMException("The request is not allowed","NotAllowedError")});let e=document.createElement("span");e.setAttribute(M,""),e.textContent=t,e.style.whiteSpace="pre",document.body.appendChild(e);let o=window.getSelection(),i=window.document.createRange();o?.removeAllRanges(),i.selectNode(e),o?.addRange(i);let a=!1;try{a=window.document.execCommand("copy")}catch(r){console.error("Could not copy:",r)}return o?.removeAllRanges(),window.document.body.removeChild(e),a?Promise.resolve():Promise.reject(new DOMException("The request is not allowed","NotAllowedError"))}function j(t){return t.target instanceof HTMLElement&&t.target.hasAttribute(M)}var w=["video/mp4"];var f=v("clipboard"),m="text/html",c="text/plain",x="image/*",C="video/*",A=D()??!1;async function W(t){for(let e of t){if(!e.types.includes(c))continue;return(await e.getType(c)).text()}}async function k(t){for(let e of t){if(!e.types.includes(m))continue;return await(await e.getType(m)).text()}}async function L(t){let e=[];for(let o of t)for(let i of o.types){if(!y.includes(i))continue;let a=await o.getType(i),r=g.get(i),s=new File([a],`image.${r}`,{type:i});e.push(s)}return e}async function B(t){let e=[];for(let o of t)for(let i of o.types){if(!w.includes(i))continue;let a=await o.getType(i),r=g.get(i),s=new File([a],`video.${r}`,{type:i});e.push(s)}return e}async function H(t,e){f.trace("clipboardWrite",t);let{[c]:o,[m]:i,[x]:a,[C]:r,...s}=t;b(!a,"Writing image/* mimeType is currently not supported"),b(!r,"Writing video/* mimeType is currently not supported"),b(!i||Object.keys(s).length===0,"Cannot write both text/html and other MIME-types to the clipboard");try{let n;if(i?n=i:n=T(s),e?.clipboardData)o&&e.clipboardData.setData(c,o),n&&e.clipboardData.setData(m,n),e.preventDefault();else{let p={};o&&(p[c]=new Blob([o],{type:c})),n&&(p[m]=new Blob([n],{type:m}));let d=new window.ClipboardItem(p);await navigator.clipboard.write([d])}}catch(n){f.error("copy error:",n)}}async function N(t,e){try{let o=t.includes(c),i=t.includes(x),a=t.includes(C),r,s,n=[],p=[];if(e?.clipboardData){if(s=e.clipboardData.getData(m),o&&(r=e.clipboardData.getData(c)),e.clipboardData.files&&e.clipboardData.files.length>0)for(let l of e.clipboardData.files)i&&y.includes(l.type)&&n.push(l),a&&w.includes(l.type)&&p.push(l)}else{let l=[];try{l=await navigator.clipboard.read(),f.trace("navigator.clipboard.read()",{items:l})}catch(I){f.error("paste error on clipboard read",I)}s=await k(l),o&&(r=await W(l)),i&&(n=await L(l)),a&&(p=await B(l))}let d=s?h(s,t):{};return r&&(d[c]=r),n.length>0&&(d[x]=n),p.length>0&&(d[C]=p),f.trace("clipboardRead",{types:t,result:d}),d}catch(o){f.error("paste error",o)}}async function O(t,e){let o=await P([t],e);if(o)return o[t]}async function q(t,e){return H(t,e)}async function P(t,e){return N(t,e)}function G(t){if(t&&t instanceof ClipboardEvent)return!0;let e=navigator.clipboard;if(!e)return!1;let{read:o,readText:i,write:a}=e;return[o,i,a,window.ClipboardItem].every(F)}async function Y(){if(!G()||A)return!1;try{return await navigator.clipboard.read(),!0}catch{return!1}}export{R as a,_ as b,y as c,w as d,O as e,q as f,P as g,G as h,Y as i,S as j,j as k};
//# sourceMappingURL=chunk-N42NUTZC.mjs.map
