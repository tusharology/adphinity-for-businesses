import{b as y,d as b,e as P,k as x,l as N,m as E,n as k,o as A,p as u,q as R,r as c,t as T,u as g}from"chunk-M7Q6Z7RT.mjs";var F="framer_",l="editSite";var{createPortal:C}=E("react-dom");var X="autoplay; ambient-light-sensor; accelerometer; camera; display-capture; encrypted-media; fullscreen; geolocation; gyroscope; magnetometer; microphone; midi; picture-in-picture; usb; xr-spatial-tracking",G="autoplay",J="autoplay; ambient-light-sensor; accelerometer; camera; display-capture; encrypted-media; fullscreen; geolocation; gyroscope; magnetometer; microphone; midi; picture-in-picture; usb; xr-spatial-tracking; clipboard-read; clipboard-write";function B(e){let t;switch(e){case"on_page":t=G;break;case"editor":t=X;break;case"preview":t=J;break;default:T(e)}return t}var h="data-original-href",M="link[rel*='icon']",Z=`${M}:not([${h}])`,Q="https://framerusercontent.com/sites/icons/writing-hand-favicon.png";function O(){document.querySelectorAll(Z).forEach(e=>{e instanceof HTMLLinkElement&&(e.setAttribute(h,e.href),e.setAttribute("href",Q))})}function D(){document.querySelectorAll(M).forEach(e=>{e instanceof HTMLLinkElement&&e.getAttribute(h)&&(e.setAttribute("href",e.getAttribute(h)??""),e.removeAttribute(h))})}function L(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function U(e,t){let[o,i]=c(!1);return u(()=>{let n=r=>{if(r.origin!==e||!L(r.data))return;let{apiVersion:s,type:a,component:d}=r.data;s===1&&a==="initializeComponent"&&d===t&&i(!0)};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}},[e,t]),o}var S="default";var{useCurrentRoute:V,useLocaleInfo:z,useRouter:W}=E("framer");function j(){let e=V(),t=z()?.activeLocale??void 0,{collectionUtils:o}=W(),[i,n]=c(),r=e?.id,s=e?.collectionId,a=e?.pathVariables;return u(()=>{if(!r)return;let d=!1;return ee(t,s,o,a).then(f=>{d||n({collectionItemNodeId:f,webPageNodeId:r,activeLocaleId:t?.id??S})}).catch(()=>{d||n({collectionItemNodeId:void 0,webPageNodeId:r,activeLocaleId:t?.id??S})}),()=>{d=!0}},[t,s,o,a,r]),i}async function ee(e,t,o,i){if(!t)return;let n=Object.values(i??{}),[r]=n;if(n.length!==1||!r||typeof r!="string")return;let s=o?.[t];return(await s?.())?.getRecordIdBySlug(r,e)}function H(e,t){let o=j(),i=U(t,"OnPageActiveRouteStore");u(()=>{i&&e.current?.contentWindow?.postMessage({apiVersion:1,type:"updateNodeIds",nodeIds:o},t)},[e,o,t,i])}var te=Date.now();function ne(){return window.self!==window.top}var oe=`
#__framer-editorbar {
    /* https://sergeyski.com/css-color-scheme-and-iframes-lessons-learned-from-disqus-background-bug */
    color-scheme: light dark;
    overflow: hidden;
    position: fixed;
    border: none;
    z-index: calc(${b});
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    touch-action: manipulation;
}

@supports (height: 100dvh) {
    #__framer-editorbar {
        height: 100dvh;
    }
}

#__framer-editorbar.status_hidden {
    display: none;
}

#__framer-editorbar.status_visually_hidden {
    clip-path: circle(1px at calc(100% - 1px) calc(100% - 1px));
    z-index: calc(${b} - 1);
}

#__framer-editorbar.status_measuring {
    clip-path: unset;
}
`,K=document.createElement("style");K.innerHTML=oe;document.head.appendChild(K);var w=new URL(import.meta.url).origin;function re(){if(localStorage[y])return Y(),!0;let e=new URL(window.location.href),t=e.searchParams.has(l),o=e.searchParams.has(l.toLowerCase());if(!t&&!o)return!1;let i=t?l:l.toLowerCase(),n=e.searchParams.get(i);if(n!==""&&n!==null)return!1;for(let r of e.searchParams.keys())if(r!==l&&r!==l.toLowerCase()&&!r.startsWith(F))return!1;return Y(),localStorage[y]=new Date().toString(),!0}function Y(){let e=new URL(window.location.href);e.searchParams.has(l)&&(e.searchParams.delete(l),e.searchParams.delete(l.toLowerCase()),window.history.replaceState({},"",e.toString()))}var I=(()=>{try{return re()}catch(e){return console.error(e),!1}})();function q(){return null}function ie(){let e=document.getElementsByClassName("lenis-scrolling");for(let t of e)t.classList.remove("lenis-scrolling")}function ae(e){let[t,o]=c(e),i=A(()=>{"requestIdleCallback"in window?requestIdleCallback(()=>{o(!0)}):setTimeout(()=>{o(!0)},300)},[]);return u(()=>{if(!t)if(document.readyState==="complete")i();else{let n=()=>{document.readyState==="complete"&&i()};return document.addEventListener("readystatechange",n,{once:!0}),()=>{document.removeEventListener("readystatechange",n)}}},[t,i]),t}function se(e,t){let[o,i]=c(t),[n,r]=c(!0),[s,a]=c(!1),[d,f]=c("hidden"),p=R();return p.current??=new x,u(()=>{function _(m){if(m.origin===w&&typeof m.data=="object"&&m.data?.apiVersion===1)if(m.data.type==="accessResult"&&m.data.data.status==="success"){i(!0);try{localStorage[y]=new Date().toString()}catch($){console.error($)}}else m.data.type==="exitFullscreen"?(document.body.style.overflow="auto",window.scrollTo({behavior:"instant",top:m.data.position?.top??0}),f("hidden")):m.data.type==="sandboxReadyState"&&m.data.data.status==="ready"&&(r(!1),setTimeout(()=>{p.current?.resolve()},50))}return window.addEventListener("message",_),()=>{window.removeEventListener("message",_)}},[]),{showEntrypointButton:o,entrypointButtonLoading:s?n:!1,iframeState:d,onEditContent:()=>{e.current?.contentWindow?.postMessage({apiVersion:1,type:"enterOnPageEditing"},w),f("fullscreen"),a(!0),p.current?.then(()=>{e.current?.contentWindow?.postMessage({apiVersion:1,type:"showCanvas",position:{top:window.scrollY}},w),setTimeout(()=>{document.body.style.overflow="hidden"},P),a(!1)}),ie()}}}function ue({framerSiteId:e,features:t,iframeRef:o,className:i}){H(o,w);let n=new URL(import.meta.url),r=n.pathname.lastIndexOf("/");if(r<0)throw new Error("Invalid pathname");let s=t?.editorBarDisableFrameAncestorsSecurity?"fake-domain.example":window.location.hostname;return n.pathname=n.pathname.slice(0,r),n.searchParams.set("framerSiteId",e),n.searchParams.set("source",s),n.searchParams.set("features",JSON.stringify(t||{})),n.searchParams.set("loadStart",te.toString()),I&&n.searchParams.set("forceShow","true"),g("iframe",{id:"__framer-editorbar",ref:o,src:n.href,"aria-hidden":"true",allow:B("on_page"),tabIndex:-1,className:i})}var v;function ce({shouldLoad:e,...t}){e&&(v??=import("EditButton-QP6NNWOB.mjs"));let[o,i]=c(null);return u(()=>{e&&v&&v.then(n=>{i(()=>n.EditButton)}).catch(()=>{})},[e]),!e||!o?null:g(o,{...t})}function le({framerSiteId:e,features:t}){let o=R(null),i=ae(I),n=I||i,{showEntrypointButton:r,entrypointButtonLoading:s,iframeState:a,onEditContent:d}=se(o,I);if(u(()=>{if(a!=="fullscreen")return;let p=document.title;return document.title="Editing Page\u2026",O(),()=>{document.title=p,D()}},[a]),!n)return null;let f;return a==="fullscreen"?f="fullscreen":r?f="status_visually_hidden":f="status_hidden",C([g(ce,{shouldLoad:r,isLoading:s,onClick:d,isEditorVisible:a==="fullscreen"},"button"),g(ue,{framerSiteId:e,features:t,iframeRef:o,className:f},"iframe")],document.body)}function je(){return ne()?(console.log("[Framer On-Page Editing] Unavailable because site is embedded in iframe"),q):N()?(console.log("[Framer On-Page Editing] Unavailable because running in WebView"),q):k(le)}export{je as createEditorBar};
//# sourceMappingURL=https://app.framerstatic.com/editorbar-initializer.NI55GURJ.mjs.map
