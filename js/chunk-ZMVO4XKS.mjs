import{$ as Aa,V as wo,Y as po,_ as Wa,aa as Da,h as Ea,j as Ma,r as Fa,w as Ba}from"chunk-XJ4CEXO5.mjs";import{b as Oa}from"chunk-SXEXQJWW.mjs";import{Da as Ta,M as wt,Na as Ia,Ua as Va,la as Tt,ma as Rr,na as Gp,oa as Vr}from"chunk-W7PFF3PB.mjs";import{O as vo,s as ka}from"chunk-IORK7F2P.mjs";import{a as En,aa as wi,la as xa,v as Po}from"chunk-TO3PG6NS.mjs";import{a as kn}from"chunk-UZULDITV.mjs";import{d as Ir,e as va,f as wa}from"chunk-GTTBHLX4.mjs";import{a as kt}from"chunk-UEZTY3XB.mjs";import{d as Sr,j as Ra}from"chunk-4J3SNVLD.mjs";import{a as co}from"chunk-4WNUDHIP.mjs";import{b as vt}from"chunk-YQXRHNKK.mjs";import{L as ha}from"chunk-VHBQVA4D.mjs";import{b as Ca}from"chunk-O4RNKAQJ.mjs";import{e as Sa}from"chunk-ZOR27MRK.mjs";import{Sa as Ci,hc as Pi,qc as vi}from"chunk-NYFEUS7P.mjs";import{f as Me}from"chunk-6Z2W7ESM.mjs";import{a as Na}from"chunk-2W7AVDV6.mjs";import{$d as Yi,Ab as Ei,Ad as Gi,Bd as Ui,Cc as Fi,Cd as Li,He as Qe,Ie as Fe,Jd as qi,Kd as Hi,Ke as eo,Lg as ya,Ne as ht,Oe as oo,Qe as ua,Rc as Bi,Re as xt,Sd as wr,Se as q,Ta as ki,Tc as Wi,Tf as Pt,Ua as Ii,Ud as Ki,Ue as da,Vd as Zi,Wd as Ji,Xa as Ri,Xd as $i,Ya as Vi,Yc as Ai,Yd as Xi,Yf as fa,Zd as ji,_c as vr,_d as mt,ad as Di,ae as ft,be as gt,ca as Cr,ce as Tr,da as Pr,dd as zi,dg as ga,ed as _i,ee as Qi,f as Ti,fb as Do,fe as ea,ge as oa,he as ta,ia as ut,ie as bt,je as ra,jg as ba,ke as yt,kg as to,le as na,me as ia,ne as aa,oe as kr,pe as sa,qe as la,re as pa,rf as Ct,rg as oe,sb as Si,se as ca,uf as ma,vc as Mi,wb as Oi,xb as dt,yb as Ni,yg as Ce,zg as ro}from"chunk-BMVMSSVG.mjs";import{a as P}from"chunk-QFU6OGL3.mjs";import{Ag as fi,Bf as mi,Cg as gi,Ee as Wo,Eg as bi,Ge as Ao,Gg as ct,H as Ne,Ie as li,K as ri,ga as lt,ha as ni,jf as xr,kf as pi,me as si,of as ci,pc as ii,rf as ui,tf as di,yf as pt,zn as xi}from"chunk-G5CI4O4F.mjs";import{b as O}from"chunk-SOM3QFWS.mjs";import{a as Pa}from"chunk-7GSEC7H4.mjs";import{k as hi}from"chunk-N42NUTZC.mjs";import{i as z,j as ai,k as Ee}from"chunk-26DHASNB.mjs";import{$p as Co,B as Rn,Bb as dr,Cm as hr,Dm as $n,Em as Xn,Gb as et,Hb as Fn,Jb as Eo,Kb as Bn,Lb as ao,Mb as Wn,Nb as Se,Ob as so,Od as rt,Qb as mr,Rb as ze,Sb as Mo,Tb as fr,Th as Xe,Ub as gr,Uh as it,Un as ei,Vh as Fo,Vn as Bo,Wh as Un,Wk as xe,Y as me,Z as Y,Zj as Ln,_c as zn,_p as lo,aa as G,bc as Je,bf as nt,cc as $e,dc as ot,ea as Sn,ec as An,gc as xo,jl as Hn,jn,kd as _n,ks as yi,lc as Dn,ld as yr,mc as br,od as tt,ol as Kn,pl as Zn,rb as Mn,rk as qn,rl as Jn,rn as je,sn as at,tn as Ye,vb as Qo,wb as Ve,wn as Yn,xb as ur,xn as Qn,zg as Oe}from"chunk-LIUGL3AW.mjs";import{$ as oi,d as In,fa as st,ja as ti}from"chunk-RT6MD2HE.mjs";import{a as lr}from"chunk-BUC334RG.mjs";import{p as Nn}from"chunk-OBUCKN56.mjs";import{a as On,b as B,e as Ze,g as he,h as Re,j as J,l as cr}from"chunk-CMAEAGWD.mjs";import{b as Tn}from"chunk-AUNF3KWQ.mjs";import{Ha as pr,dg as Gn,g as Vn}from"chunk-NNG7ZAML.mjs";import{a as L,b as h}from"chunk-JB2N3EQZ.mjs";import{g as wn}from"chunk-4X7KIAE7.mjs";import{W as yo,da as Cn,ha as Pn,ia as ho,m as Yo,pa as vn,ua as sr}from"chunk-EEV263O3.mjs";import{a as k,b as De}from"chunk-YOOGIIWU.mjs";import{e as u,j as be}from"chunk-AHQIRSXG.mjs";var It=u(L(),1),_a=u(h(),1),Or=(0,It.createContext)(void 0);Or.displayName="ImagePluginPickerButtonContext";function Xu({component:e,children:o}){return(0,_a.jsx)(Or.Provider,{value:e,children:o})}function za(){return(0,It.useContext)(Or)}var Rt=u(L(),1),Up={},Ga=(0,Rt.createContext)(Up);Ga.displayName="ControlPropRowContext";function Yu(){let e=(0,Rt.useContext)(Ga);if(!e)throw new Error("useControlPropRows must be used within a ControlPropRowContext.Provider");return e}var Nr=u(L(),1),Ua=Nr.default.createContext(!1),ed=Ua.Provider;function La(){return Nr.default.useContext(Ua)}function Vt(e=!0){let o=O(),t=La();return wo(()=>!Ne(o)||t||!e?null:o.stores.treeStore.variableProviderInfo,[t,e],"VariableProviderInfo")}function qa(e,o){let{id:t,providerId:r=o?.fallbackProvider}=e;return!o||!r?{variable:void 0,providerId:r}:{variable:o.combined.get(r)?.get(t),providerId:r}}function Mr(e,o){let{id:t,providerId:r=o?.fallbackProvider}=e;if(!(!o||!r))return o.combined.get(r)?.get(t)}var pe="dt2vdl5",St="dc4gvpv",Ha="s1dpgfha";var Lp={track:!0};function zo(e){let o={...e,event:"variable_reference_delete"};Tn(o,Lp)}var Br=u(L(),1);function qp(e,o){return!yi(o)||!o.repeatArray.providerId?void 0:e.getNodeWithTrait(o.repeatArray.providerId,Bo)?.getVariable(o.repeatArray.id)?.name}function Hp(e,o,t){let r=qp(e,t);if(r)return r;if(yr(t))return t.resolveValue("name")||"Component";if(Dn(t)&&t.dataIdentifier){let n=o.dataForIdentifier(t.dataIdentifier);if(n)return Qo(n.name)}return t.resolveValue("name")||vi(o,t)}function Kp(e){return _n(e)?"List":tt(e)?"Page":yr(e)?"Component":""}function Ot(e,o,t,r="long"){if(t===si)return"Localization";let n=e.get(t);if(!n)return"Unknown";let i=Hp(e,o,n),a=Kp(n);return r==="type"?a:!a||i===a?i:`${i} ${a}`}var Ka="by3f1yf",Za="b1locfei",Ja="ck79ln6",$a="ikobvuw",Xa="tz41s9a",ja="c11k2f3d",Ya="m1wy3we0";var N=u(h(),1);function Fr(e,o){switch(e){case"string":return(0,N.jsx)(sa,{foreground:o});case"richtext":return(0,N.jsx)(ia,{foreground:o});case"number":case"scrollsectionref":return(0,N.jsx)(yt,{foreground:o});case"boolean":return(0,N.jsx)(Zi,{foreground:o});case"color":return(0,N.jsx)(ji,{foreground:o});case"image":return(0,N.jsx)(oa,{foreground:o});case"eventhandler":return(0,N.jsx)(gt,{foreground:o});case"controlReference":case"nodePropertyControlReference":return(0,N.jsx)(ft,{foreground:o});case"link":return(0,N.jsx)(ta,{foreground:o});case"linkrelvalues":return(0,N.jsx)(bt,{foreground:o});case"date":return(0,N.jsx)(Yi,{foreground:o});case"enum":return(0,N.jsx)(ft,{foreground:o});case"file":return(0,N.jsx)(Tr,{foreground:o});case"customcursor":case"cursor":return(0,N.jsx)(mt,{foreground:o});case"slug":return(0,N.jsx)(kr,{foreground:o});case"transition":return(0,N.jsx)(pa,{foreground:o});case"border":return(0,N.jsx)(Ji,{foreground:o});case"boxshadow":return(0,N.jsx)(aa,{foreground:o});case"gap":return(0,N.jsx)(ea,{foreground:o});case"padding":return(0,N.jsx)(na,{foreground:o});case"borderradius":return(0,N.jsx)($i,{foreground:o});case"collectionreference":return(0,N.jsx)(Xi,{foreground:o});case"multicollectionreference":return(0,N.jsx)(ra,{foreground:o});case"array":return(0,N.jsx)(Ki,{foreground:o});case"trackingid":return(0,N.jsx)(la,{foreground:o});case"vectorsetitem":return(0,N.jsx)(ca,{foreground:o});default:return De(e,"Missing icon for variable type")}}function Qa(e,o){if(e.id===Wo)return(0,N.jsx)(Pr,{isVariable:!0,foreground:o});if(e.id===Ao)return(0,N.jsx)(Cr,{isVariable:!0,foreground:o});if(ei(e))return(0,N.jsx)(Qi,{foreground:o});if(pt(e)){let t=ci(e.id);return t===Wo?(0,N.jsx)(Pr,{isVariable:!0,foreground:o}):t===Ao?(0,N.jsx)(Cr,{isVariable:!0,foreground:o}):(0,N.jsx)(kr,{foreground:o})}if(e.type==="controlReference"||e.type==="nodePropertyControlReference"){let{expectedType:t}=e;switch(t){case"enum":case"segmentedenum":return(0,N.jsx)(ft,{foreground:o});case"file":return(0,N.jsx)(Tr,{foreground:o});default:De(t,`iconForVariable(), unsupported file reference type: ${t}`)}}return Fr(e.type,o)}var ve=u(h(),1);function Jp(e){return he(e)?xe(e)==="boolean":e==="boolean"}function $p(e,o,t){if(t.combined.size<=1)return!1;let r=t.combined.keys();for(let n of r){if(n===o.id)continue;let i=e.getNode(n);if(br(i)&&i.dataIdentifier===o.dataIdentifier)return!0}return!1}function Xp(e,o,t,r){if(!t||!r||r.combined.size<=1)return;let n=e.get(t);if(!(!br(n)||!$p(e,n,r)||r.combined.keys().next().value===t))return" ("+Ot(e,o,t,"type")+")"}function jp(e){let o=mi(e);return o||e.name||"Unknown"}function Yp(e,o,t,r,n,i,a,l){if(n)return Jp(r)?"Condition":"Transform";if(!t)return"Missing";let s=i?"Not ":"",p=jp(t),d=Xp(e,o,a,l)??"";return s+p+d}function Qp(e,o,t){if(t)return(0,ve.jsx)(ut,{});if(e)return Qa(e);let r=Array.isArray(o)?o[0]:o;return k(r),Fr(r)}function ec(e){return e?.id!==Pi}var Yd=Br.default.memo(Br.default.forwardRef(function(o,t){let r=O(),{expectedType:n,reference:i,onRemove:a,className:l,onClick:s,hasError:p,isComputedValue:d=!1,isNegated:c=!1,buttonTitle:C,onShowMenu:g,preview:y,...T}=o,b=q(),x=Vt(),{variable:m,providerId:f}=qa(i,x),v=ec(m);function S(F){a&&r.stores.contextMenuStore.show([{label:"Remove",enabled:!b,click:()=>{a(i),zo({variableId:m?.id,variableType:m?.type})}}],{location:{x:F.clientX,y:F.clientY}})}let V=r.scheduler.wrapHandler(()=>{Ne(r)&&m&&f&&v&&Ia(r,m.id,f)}),E=F=>{!a||b||(F.stopPropagation(),a(i),zo({variableId:m?.id,variableType:m?.type}))},I=Yp(r.tree,r.componentLoader,m,n,d,c,f,x),A=y??Qp(m,n,d),M=!!g&&!b,W=F=>{b||(F.stopPropagation(),g?.(F))};return(0,ve.jsxs)(Fe,{ref:t,role:"button",direction:"row",alignItems:"center",className:P(Ka,pe,s||v||M?Ja:void 0,p&&Za,l),tabIndex:0,onContextMenu:S,paddingLeft:4,gap:0,onClick:m?s??V:void 0,title:C??I,...T,children:[(0,ve.jsx)(Qe,{className:$a,children:A}),(0,ve.jsx)(Pt,{size:6}),(0,ve.jsx)("div",{className:P(eo,Xa),children:I}),a&&!b&&(0,ve.jsx)(Qe,{className:ja,onClick:E,onMouseDown:es,title:"Remove",children:(0,ve.jsx)(dt,{})}),M&&(0,ve.jsx)(Qe,{className:Ya,onMouseDown:W,onClick:es,children:(0,ve.jsx)(Ni,{})})]})}));function es(e){e.stopPropagation()}var Nt=u(Gp(),1);function oc(e,o){return o.some(t=>{t==="*"&&(t="*/*");let r=Nt.default.parse(t);if(!r){let n=Rr(t);r=n?Nt.default.parse(n):null}return r?(r.type==="*"||r.type===e.type)&&(r.subtype==="*"||r.subtype===e.subtype):!1})}function tc(e,o){if(o.length===0)return!0;let t=Rr(e)??e,r=Nt.default.parse(t);return r&&oc(r,o)?!0:o.some(n=>n==="*"||n==="*/*"||e===n||e===`.${n}`)}function os(e,o){return e.type!=="file"?!1:(k(o,"allowedFileTypes should always be defined for ControlType.File"),e.allowedFileTypes.every(({extension:t})=>tc(t,o)))}function Wr(e,o){return!e||!o||Ve(e)||ot(e)?!1:($e(e)||De(e),k(e.startValue.id===o.id),o.type==="boolean"&&e.transforms[0]?.name==="negate")}function Ar(e,o){return Wr(e,o)&&e.transforms.length===1}var ds=u(L(),1);var ts="tl8565r",gm="bvc2uw9",bm="b1k2nl76",ym="b1i3g548",hm="c77pepd",xm="wnwbz2t",Cm="w16ew1wl",Pm="r16cr7hr",vm="b1lo74ig",rc="b1119pfk",wm="b13iwexl",Tm="p1c7z6za",km=P(ts,"b1eca53j");var Im="cs3azl6",Rm="a1qeto7i",rs=P(ts,rc,"b8y1dyl"),Vm="wg2hdtb",Sm="s1ha7gxb",Om="pcukmgx",Nm="p1sb4uyz",Em="ecrz0ka";var ns="i7d4cn1",is=P(rs,"e1otabne"),as="bhul7u3";var ss="https://app.framerstatic.com/a11y-O773ZVIY.png";var ls="https://app.framerstatic.com/rem-typography-BHML23FR.jpg";var ps="https://app.framerstatic.com/scroll-targets-2PADIE7F.jpg";var cs="https://app.framerstatic.com/template-page-image-dark-K2Y4MA57.png";var us="https://app.framerstatic.com/template-page-image-light-2NW7Z5XL.png";var fe=u(h(),1);var ms=e=>{Me("ui_interaction",{page:"education-tooltip",id:e})},cc=e=>{switch(e){case"templatePage":return{title:"Template Page",actionText:"Watch Video",text:"Layout changes made to this page apply to all pages of the selected CMS collection.",image:{dark:cs,light:us},href:"https://www.framer.com/academy/lessons/cms-pages-dynamic-content",type:"button"};case"remTypography":return{title:"REM Typography",actionText:"Watch Video",text:"This is the base value per Breakpoint when using REM sizing in your typography.",image:ls,href:"https://youtu.be/DGPCFIKUDb8",type:"icon"};case"accessibility":return{title:"Accessibility Tips",actionText:"Learn More",image:ss,text:"Learn about the tools Framer gives you to add meaning to the elements of your website.",href:"https://www.framer.com/learn/accessibility/",type:"icon"};case"scrollTargets":return{title:"Scroll Sections",actionText:"Watch Video",href:"https://www.youtube.com/watch?v=AG1ZEij8Vcw",image:ps,text:"Learn how to create links that smoothly scroll to a specific section within your page.",type:"icon"};default:De(e)}};function uc({href:e,actionText:o,tooltipId:t,content:r,image:n}){return(0,fe.jsx)(Wa,{icon:(0,fe.jsx)(Qe,{className:ns,title:"",children:(0,fe.jsx)(Ri,{})}),direction:"right",actions:e?(0,fe.jsx)(ua,{as:"a",href:e,target:"_blank",onClick:()=>ms(t),children:o}):void 0,...r,image:n})}function dc({href:e,actionText:o,tooltipId:t,content:r,image:n}){let i=(0,ds.useRef)(null),{triggerProps:a,tooltipProps:l}=fa({className:as,direction:"top",interactive:!0,offset:5,triggerRef:i,delay:"short",initialVisibility:!1,tint:z.panelBackground,alignSelf:"right"});return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsxs)(oo,{ref:i,variant:"default",enabled:!0,className:is,"aria-expanded":l.visible,onClick:a.onPointerEnter,...a,children:[(0,fe.jsx)(Oi,{}),"Template Page"]}),(0,fe.jsx)(Aa,{title:r.title,text:r.text,actions:(0,fe.jsx)(oo,{variant:"default",onClick:()=>{ms(t),ha(e)},"aria-expanded":l.visible,children:o}),image:n,...l})]})}function fs({tooltipId:e}){let{isDarkMode:o}=co(),{actionText:t,href:r,type:n,...i}=cc(e),a;return B(i.image)?a=i.image:i.image&&"dark"in i.image&&"light"in i.image&&(a=o?i.image.dark:i.image.light),(0,fe.jsx)(n==="icon"?uc:dc,{href:r,actionText:t,tooltipId:e,content:i,image:a})}var we=u(L(),1);var gs="ib75oye",bs="dnxepni";var Dr=u(h(),1);function ys(){let e=q();return(0,Dr.jsx)("div",{title:"Drag to reorder or remove",className:P(gs,e&&bs),children:(0,Dr.jsx)(Ii,{})})}function hs(e){return e.tree.getNodes(e.stores.selectionStore.ids).every(zn)}function xs(e,o,t=void 0){if(!o&&!t)return!1;let r=e.tree.getNodes(e.stores.selectionStore.ids),n=ii.overrideKeys(e.tree,r,!0);return Oa(n,o,t)}function Cs(e,o,t=void 0){ka(e.tree,e.tree.getNodes(e.stores.selectionStore.ids),o,t)}var Ps=u(L(),1);function vs(e){let o=O(),{supportsFetchDataValues:t,onSelectFetchDataValue:r}=e,n=q(),i=(0,Ps.useCallback)(()=>{if(t)return[{label:"Add Fetch",click:()=>{k(r);let a=r();Me("fetch_computed_value_create",{outputType:a.outputType})},enabled:!n&&!(Ne(o)&&Ca(o.tree,o.stores.selectionStore.ids)),submenu:void 0}]},[r,n,t]);if(!(!t||!r))return i}var Os=u(L(),1);function Ts(e){return e?.type==="transform"}function Sf(e){return e?.type==="unknownTransform"}function fc(e){return e?.type==="typeError"}function Of(e){return fc(e)&&"key"in e}function Ge(e,o){return he(o)?o.includes(e):e===o}function gc(e){let o=-1,t=-1;for(let i=0,a=e.length;i<a;i++){let l=e[i];l&&(l.name==="greaterThan"&&l.isNegated?o=i:l.name==="lessThan"&&!l.isNegated&&(t=i))}if(o===-1||t===-1)return;let r=e[o];k(r);let n=e[t];k(n),e[o]=n,e[t]=r}function Mt(e,o){e.sort((t,r)=>t.outputType===r.outputType?0:t.outputType===o?-1:1),gc(e)}function Nf(e,o,t){let r=e.at(-1);if(!r)return;let n=so(r);if(n===t)return;let i=Eo(n);if(i)for(let a of i){let l=Se(a);if(l&&l.includes(t)){e.push(Co({name:a,input:n,output:o??t}));return}}}var zr=2;function bc(e,o,t){let r=[{transformName:e,depth:1}],i=t==="boolean"&&o===t?1:zr,a=new Set;for(;r.length>0;){let{transformName:l,depth:s}=r.shift();if(a.has(l))continue;a.add(l);let p=Se(l);if(p){if(p.includes(t))return!0;if(i!==s&&!gr(l))for(let d of p){let c=Eo(d);if(c)for(let C of c)r.push({transformName:C,depth:s+1})}}}return!1}var _r=(()=>{let e=new Map;return(o,t,r)=>{let n=o+t+r,i=e.get(n);if(On(i))return i;let a=bc(o,t,r);return e.set(n,a),a}})();function Et({input:e,output:o,currentTransform:t,currentTransformOutput:r,transformBefore:n,variableConsumesNegated:i,supportedTransformNames:a}){let l=[];return a.forEach(s=>{let p=ao(s);if((!p||!p.includes(e))&&s!==t)return;let d=Se(s),c;if(d.includes(o))c=o;else if(r&&d.includes(r))c=r;else{if(!_r(s,e,o))return;let y=Se(s);c=y.includes(o)?o:y[0]}if(n===s&&t!==s&&!fr(s))return;let C=!!(n&&ze(n));C&&s==="negate"||C&&s==="isSet"||!n&&i&&s==="negate"||(l.push({name:s,isNegated:!1,outputType:c}),ze(s)&&l.push({name:s,isNegated:!0,outputType:c}))}),Mt(l,o),l.length>0?l:null}function ws(e,o,t){if(k(o>=0),o===0||o===1&&t)return null;let r,n=t?1:0;for(let i=o-1;i>=n;i--){let a=e[i];if(k(a),a.name==="negate"){r=a;continue}return r&&!ze(a.name)?r:a}return k(r),r}function yc(e){if(!Re(e))return e;for(let o of e)if(Je(o))return o;throw Error("Expected type must be a computed value type")}function ks({mainInputType:e,inputControl:o,variableIsNegated:t,transforms:r,expectedType:n,propName:i,supportedTransformNames:a=et()}){let l=yc(n),s=e==="boolean",p={sections:[],errorBefore:null,errorAfter:null,transformAdditionOptions:[],variableIsNegated:t},d=Ge(e,n),c=e;if(r){let m=t?1:0;for(let f=m,v=r.length;f<v;f++){let S=ws(r,f,t),V=r[f];if(k(V),!Fn(V.name)){p.sections.push({type:"unknownTransform",transform:V});continue}let E=ao(V.name);if(k(E),!Ge(c,E)){let A=Mo(V.name,!1);f===0?p.errorBefore={type:"typeError",title:A,expected:E,received:c,replaceOptions:Et({input:c,output:l,currentTransformOutput:null,currentTransform:null,transformBefore:null,variableConsumesNegated:s,supportedTransformNames:a})}:(k(S),p.sections.push({type:"typeError",key:`${V.id}-error`,title:A,expected:E,received:c,replaceOptions:Et({input:c,output:l,currentTransformOutput:null,currentTransform:null,transformBefore:S.name,variableConsumesNegated:s,supportedTransformNames:a}),transformBefore:S,transformAfter:V}))}let I=p.sections[p.sections.length-1];if(V.name==="negate"&&I?.type==="transform"&&I.consumesNegated)I.isNegated=!I.isNegated;else{let A=so(V),M=d&&e!=="enum",W=p.sections.some(R=>{if(R.type!=="transform")return!0;let te=so(R.transform);return Ge(te,n)}),F=M||W||!!S;p.sections.push({type:"transform",transform:V,inputType:c,inputControl:m===f?o:void 0,consumesNegated:ze(V.name),isNegated:!1,canBeDeleted:F,replaceOptions:Et({input:c,output:l,currentTransformOutput:A,currentTransform:V.name,transformBefore:S?.name??null,variableConsumesNegated:s,supportedTransformNames:a})}),c=A}}}let C=r?ws(r,r.length,t):null,g=C?C.name:null,y=g==="negate",T=g?ze(g):!1,b=!Ge(c,n);return b&&(p.errorAfter={type:"typeError",title:i,expected:n,received:c,replaceOptions:Et({input:c,output:l,currentTransformOutput:null,currentTransform:null,transformBefore:g,variableConsumesNegated:s,supportedTransformNames:a})}),hc(p,C,n,b)&&(a.forEach(m=>{if(g===m&&!fr(m)||m==="negate"&&(!C||y||T))return;let f=ao(m);if(!f||!f.includes(c))return;let v=Se(m),S=v.find(V=>Ge(V,n))??v[0];Ge(c,n)&&!Ge(S,n)||gr(m)&&!Ge(S,n)||(p.transformAdditionOptions.push({name:m,isNegated:!1,outputType:S}),ze(m)&&p.transformAdditionOptions.push({name:m,isNegated:!0,outputType:S}))}),Mt(p.transformAdditionOptions,l)),p}function hc(e,o,t,r){return r?!0:t==="boolean"?Nn.isOn("dynamicFilters")?o?.name!=="equals":e.sections.every(n=>n.type!=="transform"):Ge("enum",t)?!o||!o.name?!0:!Se(o.name).includes("enum"):!0}function Is(e,o,t){switch(t.name){case"equals":switch(o.name){case"equals":case"startsWith":case"endsWith":case"contains":case"lessThan":case"greaterThan":case"isAfter":case"isBefore":switch(e){case"string":case"boolean":case"number":case"enum":case"date":case"collectionreference":Hn(e,o.value)&&(t.value=o.value);break}}return;case"isAfter":case"isBefore":switch(o.name){case"isBefore":case"isAfter":case"equals":B(o.value)&&(t.value=o.value);break}break;case"lessThan":case"greaterThan":switch(o.name){case"lessThan":case"greaterThan":t.value=o.value;break;case"equals":Ze(o.value)&&(t.value=o.value);break}break;case"startsWith":case"endsWith":case"contains":switch(o.name){case"startsWith":case"endsWith":case"contains":case"equals":B(o.value)&&(t.value=o.value)}break;case"prefix":case"suffix":switch(o.name){case"prefix":case"suffix":t.value=o.value,t.valueLocalized=o.valueLocalized}break;case"isIncludedIn":switch(o.name){case"isIncludedIn":he(o.value)&&o.value.every(B)&&(t.value=o.value)}break;case"containsAny":case"containsAll":switch(o.name){case"containsAny":case"containsAll":(Ve(o.value)||he(o.value)&&o.value.every(B))&&(t.value=o.value)}break}}function To(e,o,t,r){return o!=="controlReference"?e.canCreateVariable({type:o}):!t||!r?!1:(Re(t)?t:[t]).some(i=>Yn(i)&&e.canCreateVariable({type:"controlReference",expectedType:i,entityIdentifier:r}))}function xc(e,o,t,r,n){return n&&To(e,n,t,r)?[n]:Re(o)?o.filter(i=>To(e,i,t,r)&&i!=="enum"):To(e,o,t,r)?[o]:[]}function Cc({engine:e,dynamicValue:o,canCreateVariable:t,variableType:r,variableCreationType:n,variableInfo:i,onCreateVariable:a,variableReferenceType:l,supportsComputedValues:s,collectionReferenceDataIdentifier:p,controlSourceIdentifier:d,vectorSetIdentifier:c,isReadOnly:C,controlKey:g,allowedFileTypes:y,displayTransformOptions:T,onSelectVariable:b,onSelectComputedValue:x,onRemoveDynamicValue:m,computedValuePopoutId:f,variableFilter:v}){let S=[],V=C||xa(e,"canDesign");if(t){k(i,"variableInfo should be defined");let M=e.tree.getNodeWithTrait(i.idOfMutableVariableProvider,Bo);k(M,"variableProviderNode should exist when creating variables");let W=xc(M,r,l,d,n);if(W.length===1){let F=W[0];k(dr(F),"onlyVariableType should be defined"),S.push({label:"Create Variable",enabled:!V,click:()=>{k(i.idOfMutableVariableProvider,"idOfMutableVariableProvider should exist when creating variables"),k(a,"onCreateVariable should be defined"),a(M.id,F)}})}else W.length>1&&S.push({label:"Create Variable",submenu:W.map(F=>({label:Qn(F),enabled:!V,click:()=>{k(i.idOfMutableVariableProvider,"idOfMutableVariableProvider should exist when creating variables"),k(a,"onCreateVariable should be defined"),a(M.id,F)}}))})}let E=Nc(e,i,r,l,s,p,c,d,g,y,T,v),I=Mc({engine:e,variableInfo:i,compatibleVariablesByProvider:E,variableType:r,dynamicValue:o,variableReferenceType:l,collectionReferenceDataIdentifier:p,vectorSetIdentifier:c,controlSourceIdentifier:d,controlKey:g,allowedFileTypes:y,supportsComputedValues:s,onSelectVariable:b,onSelectComputedValue:x,onRemoveDynamicValue:m,readonly:V,variableFilter:v});I.length>0&&S.push({label:"Set Variable",submenu:I});let A=Wc({engine:e,variableInfo:i,dynamicValue:o,variableType:r,supportsComputedValues:s,onSelectComputedValue:x,computedValuePopoutId:f,displayTransformOptions:T,controlSourceIdentifier:d,controlKey:g,readonly:V});return A&&S.push(A),S}function Ns(e){let o=O(),{variableType:t,variableCreationType:r,variableReferenceType:n,dynamicValue:i,onCreateVariable:a,onSelectVariable:l,onRemoveDynamicValue:s,collectionReferenceDataIdentifier:p,controlSourceIdentifier:d,vectorSetIdentifier:c,controlKey:C,allowedFileTypes:g,supportsComputedValues:y,onSelectComputedValue:T,displayTransformOptions:b=!0,computedValuePopoutId:x,variableFilter:m}=e,f=Vt(),{canCreateVariable:v,canAssignVariable:S}=Pc(o,f,e),V=q(),E=(0,Os.useCallback)(()=>{if(f&&t)return Cc({engine:o,variableInfo:f,variableType:t,variableCreationType:r,variableReferenceType:n,supportsComputedValues:y,collectionReferenceDataIdentifier:p,controlSourceIdentifier:d,vectorSetIdentifier:c,controlKey:C,allowedFileTypes:g,displayTransformOptions:b,dynamicValue:i,onSelectComputedValue:T,onSelectVariable:l,isReadOnly:V,onRemoveDynamicValue:s,onCreateVariable:a,canCreateVariable:v,computedValuePopoutId:x,variableFilter:m})},[g,v,p,x,C,d,b,i,V,a,s,T,l,y,r,f,n,t,c,m]);return S?E:void 0}function Pc(e,o,t){let n=!!t.supportsVariables&&Sc(o,t.variableType,t.variableReferenceType,t.supportsComputedValues,t.collectionReferenceDataIdentifier,t.vectorSetIdentifier,t.controlSourceIdentifier,t.controlKey,t.allowedFileTypes,t.variableFilter),i=e.tree.getNodeWithTrait(o?.idOfMutableVariableProvider,Bo),l=vc(i,t)&&!!t.onCreateVariable,s=n&&!!t.onSelectVariable;return{canCreateVariable:l,canAssignVariable:l||s}}function vc(e,o){if(!e||!o.supportsVariables||!o.variableType)return!1;if(o.variableCreationType)return To(e,o.variableCreationType,o.variableReferenceType,o.controlSourceIdentifier);if(!Re(o.variableType))return To(e,o.variableType,o.variableReferenceType,o.controlSourceIdentifier);for(let t of o.variableType)if(To(e,t,o.variableReferenceType,o.controlSourceIdentifier))return!0;return!1}function wc(e){return Ve(e)?e:An(e)?e.startValue:null}function Tc(e,o,t,r){if(e.type!=="controlReference"&&e.type!=="nodePropertyControlReference")return!1;let{entityIdentifier:n,controlKey:i,expectedType:a}=e;return n===hr?i===r:!t||!Dc(n,t)||i!==r?!1:he(o)?o.includes(a):o===a}function kc(e,o){return e.type!=="vectorsetitem"||!o?!1:e.setModuleId===o}function Rs(e,o){let t=[{type:e,depth:1}];for(;t.length>0;){let{type:r,depth:n}=t.shift(),i=n===zr,a=Wn(r);if(a)for(let l of a){let s=ao(l);if(s)for(let p of s)o.has(p)||(o.add(p),dr(p)&&(i||t.push({type:p,depth:n+1})))}}}function Ic(e){return Re(e)?Array.from(e).sort().join():e}var Es=(()=>{let e=new Map;return o=>{let t=Ic(o),r=e.get(t);if(r)return r;let n=new Set;if(Re(o))for(let i of o)Rs(i,n);else Rs(o,n);return e.set(t,n),n}})();function Ms(e,o,t){if(!o||!t)return;if(t===hr)return k($n(o)),Xn(o);let r=e.reactComponentForIdentifier(t);if(r)return r.properties[o]}function _o(e,o,t,r,n){let i=B(o)?o:o.type;for(let a of et()){let l=ao(a);if(!l||!l.includes(i))continue;let s=Se(a),p=Re(t)?t.find(c=>s.includes(c)):s.find(c=>c===t);if(!Je(p))continue;let d=Ms(e,r,n);return{outputType:p,valueTransform:Co({name:a,input:o,output:d?.type===p?d:p})}}return null}function Rc(e,o,t,r,n,i){let a=_o(e,o,t,r,n);if(a)return xo(a.outputType,i,[a.valueTransform]);let l=_o(e,o,"boolean",r,n),s=_o(e,"boolean",t,void 0,void 0);if(l&&s)return xo(s.outputType,i,[l.valueTransform,s.valueTransform]);let p=B(o)?o:o.type;throw new Error(`Could not generate computed value with input: ${p}, and output: ${he(t)?t.join(", "):t}`)}function Vc(e,o){for(let t of e)if(o.has(t))return!0;return!1}function Vs(e,o,t,r,n,i,a,l,s){if(e==="enum")return!i||!a?!1:o.enums.some(({variable:p,sourceIdentifier:d})=>Fs(p,d,i,a));for(let[p,d]of o.combined){let c=o.variableSourceIdentifiers[p];for(let[,C]of d)if(Ft(C,p,c,e,t,r,n,i,a,l,s))return!0}return!1}function Sc(e,o,t,r,n,i,a,l,s,p){if(!o||!e)return!1;if(Re(o)){if(o.some(c=>Vs(c,e,t,n,i,a,l,s,p)))return!0}else if(Vs(o,e,t,n,i,a,l,s,p))return!0;if(r){let d=e.types,c=Es(o);if(c&&Vc(c,d))return!0}return!1}function Ft(e,o,t,r,n,i,a,l,s,p,d){return d&&!d(e,o)?!1:he(r)?r.some(c=>Ft(e,o,t,c,n,i,a,l,s,p,d)):r==="collectionreference"?e.type==="collectionreference"&&e.dataIdentifier===i:r==="multicollectionreference"?e.type==="multicollectionreference"&&e.dataIdentifier===i:r==="vectorsetitem"?kc(e,a):r==="file"?os(e,p):r==="controlReference"||e.type==="nodePropertyControlReference"?Tc(e,n,l,s):e.type==="enum"?Fs(e,t,l,s):e.type===r}function Fs(e,o,t,r){return o===t&&e.id===r}function Bs(e,o,t){return!t||!o?!1:Es(o)?.has(e.type)??!1}function Oc(e){let o={children:{}};for(let[t,r]of e){let n=di(t),i=o;for(let a of n)i.children??={},i=i.children[a]??={};i.variable=r}return o}function Nc(e,o,t,r,n,i,a,l,s,p,d,c){let C=[];function g(y,T,b,x,m,f){let v=[];if(m.includes(b)&&m.length>1)return v;for(let V in T){let E=T[V];if(!E)continue;let{variable:I,children:A}=E;if(J(I)||li(I.id)&&!tt(f)||xr(I.id,Wo)||xr(I.id,Ao))continue;if(Ft(I,y,b,t,r,i,a,l,s,p,c)){v.push({variable:I,isNegated:!1,transforms:null}),n&&I.type==="boolean"&&v.push({variable:I,isNegated:!0,transforms:null});continue}let M;if(A&&I.type==="collectionreference"){let W=I.dataIdentifier;M=g(y,A,W,[...x,I.id],[...m,b],f)}if(!ui(I.id)){if(Bs(I,t,n)){let W=Ws(I,t);if(!d){if(v.push({variable:I,isNegated:!1,transforms:null}),W){let F=W.valueTransformOptions.filter(R=>!mr.has(R.name));n&&I.type==="boolean"&&F.length>0&&v.push({variable:I,isNegated:!0,transforms:null})}continue}if(W&&W.valueTransformOptions.length>0){v.push({variable:I,isNegated:!1,transforms:W.valueTransformOptions,compatibleNestedVariables:M});let F=W.valueTransformOptions.filter(R=>!mr.has(R.name));n&&I.type==="boolean"&&F.length>0&&v.push({variable:I,isNegated:!0,transforms:F})}continue}M&&v.push({variable:I,isNegated:!1,transforms:null,compatibleNestedVariables:M})}}if(v.length!==0)return v}for(let[y,T]of o.combined){let{children:b}=Oc(T);k(b,"Variable tree should have children");let x=o.variableSourceIdentifiers[y];if(!x)continue;let m=e.tree.get(y),f=g(y,b,x,[],[],m);f&&C.push({providerId:y,providerTitle:Ot(e.tree,e.componentLoader,y),compatibleVariables:f})}return C}function Ec(e,o,t,r,n){if(!$e(e)||!t||!o)return null;let a=ks({mainInputType:t.type,inputControl:n,variableIsNegated:r,transforms:$e(e)?e.transforms:null,expectedType:o,propName:void 0}).sections.find(Ts);return a?{name:a.transform.name,isNegated:a.isNegated}:null}function Ss(e){return e.transforms.find(o=>o.name!=="negate")}function Gr(e,o,t){if(!o||!t)return;let r=o.providerId??e.fallbackProvider;if(!r)return;let n=e.combinedControls.get(r)?.get(o.id);if(n)return n.type===t.type?n:void 0}function Mc({engine:e,variableInfo:o,compatibleVariablesByProvider:t,variableType:r,dynamicValue:n,variableReferenceType:i,collectionReferenceDataIdentifier:a,vectorSetIdentifier:l,controlSourceIdentifier:s,controlKey:p,allowedFileTypes:d,supportsComputedValues:c,onSelectVariable:C,onSelectComputedValue:g,onRemoveDynamicValue:y,readonly:T,variableFilter:b}){let x=[],m=o.fallbackProvider,f=wc(n),v=f?Mr(f,o):void 0,S=Wr(n,v),V=Ec(n,r,v,S,Gr(o,f,v));function E(A,M,W){return A.map(F=>{let{variable:R,isNegated:ae,transforms:te,compatibleNestedVariables:Q}=F,Z=Ac(F,M,f,S,m),de=te?.map(j=>({label:Mo(j.name,j.isNegated),enabled:!T,checked:Z&&V?.name===j.name&&V.isNegated===j.isNegated,click:()=>ue(j)}));if(Q){k(R.type==="collectionreference"||R.type==="array","Invalid variable type");let j=R.type==="collectionreference"?R.dataIdentifier:W,se=E(Q,M,j),Pe=Ve(f)&&(f.providerId??m)===M&&pi(f.id,R.id);if(Q.length===1&&se.length===1){let re=Q[0],ee=se[0];if(re&&pt(re.variable)&&ee)return{label:R.name,checked:Pe,click:ee.click}}return de&&se.unshift(...de,{type:"separator"}),{label:R.name,checked:Pe,submenu:se}}function ue(j=void 0){if(Z&&!j){n&&y?.(n),zo({variableId:R.id,variableType:R.type});return}let se=ur(R.id,M);if($e(n)&&n.transforms.length>0&&v?.type===R.type&&!Ar(n,v)&&!j){let ee={...n,startValue:se};if(ae!==S){k(R.type==="boolean");let ce=Array.from(ee.transforms);ee.transforms=ce,ae?ce.unshift(lo()):(k(ce[0]?.name==="negate"),ce.shift())}g?.(ee);return}if(Ft(R,M,W,r,i,a,l,s,p,d,b)&&!j){if(ae){k(R.type==="boolean"),g?.(xo("boolean",se,[lo()]));return}C?.(ur(R.id,M),R.type),kn({variableId:R.id,variableType:R.type});return}k(Bs(R,r,c),"Selected variable should be assignable using a computed value"),k(r,"Variable type should be defined");let Pe=Gr(o,se,R)??R.type,re;if(j){let ee=Ms(e.componentLoader,p,s),ce=j.outputType,U=[Co({name:j.name,input:Pe,output:ee?.type===ce?ee:ce})];j.isNegated&&U.push(lo());let ne=he(r)?r.find(Je):r;if(k(Je(ne)),j.outputType!==ne){let le=_o(e.componentLoader,j.outputType,ne,p,s);le&&U.push(le.valueTransform)}re=xo(ne,se,U)}else re=Rc(e.componentLoader,Pe,r,p,s,se);if($e(n)){let ee=Ss(n),ce=Ss(re);if(ee&&ce){v?.type===R.type&&Is(R.type,ee,ce);let bo=so(ee),U=so(ce);if(bo===U){let ne=n.transforms.findIndex(He=>He===ee),le=n.transforms.slice(ne+1);if(le.length>0){let He=re.transforms.findIndex($o=>$o===ce),Jo=re.transforms.slice(0,He+1);Jo.push(...le),re.transforms=Jo}}}}ae&&(k(R.type==="boolean"),re.transforms=[lo(),...re.transforms]),g?.(re),Me("computed_value_create",{initialTransformName:re.transforms[0]?.name,inputType:R.type,outputType:re.outputType,source:"property_panel_row"})}return{label:(ae?"Not ":"")+(R.name||"Unknown"),checked:Z,enabled:!T,click:()=>ue(),submenu:de}})}let I=t.entries();for(let[A,{providerId:M,providerTitle:W,compatibleVariables:F}]of I){let R=o.variableSourceIdentifiers[M];if(!R)continue;let ae=E(F,M,R);A===0?x.push(...ae):(A===1&&x.push({type:"separator"}),x.push({label:W,submenu:ae,checked:Ve(f)&&(f.providerId??m)===M}))}return x}function Fc(e,o){let t=new Map,r=Eo(e);if(!r)return t;for(let n of r){if(!_r(n,e,o))continue;let a=Se(n),l=a.includes(o)?o:a[0];t.set(n,l)}return t}var Bc=(()=>{let e=new Map;return(o,t)=>{let r=o+t;if(e.has(r))return e.get(r);let n=Fc(o,t),i=[];for(let[l,s]of n)l==="negate"&&o==="boolean"||(i.push({name:l,isNegated:!1,outputType:s}),ze(l)&&i.push({name:l,isNegated:!0,outputType:s}));if(i.length===0){e.set(r,void 0);return}Mt(i,t);let a={valueTransformOptions:i,outputType:t};return e.set(r,a),a}})();function Ws(e,o){if(!Bn(e.type))return;let t=Array.isArray(o)?o.find(Je):o;if(Je(t))return Bc(e.type,t)}function Wc({engine:e,variableInfo:o,dynamicValue:t,variableType:r,supportsComputedValues:n,onSelectComputedValue:i,computedValuePopoutId:a,displayTransformOptions:l,controlSourceIdentifier:s,controlKey:p,readonly:d}){if(!n||!i||!r||!t||ot(t)||!l)return;let c=Ve(t)?t:t.startValue,C=Mr(c,o);if(!C)return;let g=Ar(t,C),y=r==="boolean";if($e(t)&&!g)return{label:`Edit ${y?"Condition":"Transform"}`,click:()=>{k(a),Ba.navigation.presentPopout(a)}};if(!Ve(t)&&!g)return;let T=Ws(C,r);if(!T)return;let{valueTransformOptions:b,outputType:x}=T;return{label:`Add ${y?"Condition":"Transform"}`,submenu:b.map(m=>({label:Mo(m.name,m.isNegated),enabled:!d,click:()=>{let f=[];g&&f.push(lo());let v=Gr(o,c,C),S=Co({name:m.name,input:v??C.type,output:m.outputType});if(f.push(S),m.isNegated&&f.push(lo()),B(r)&&m.outputType!==r){let E=_o(e.componentLoader,m.outputType,r,p,s);E&&f.push(E.valueTransform)}let V=xo(x,c,f);i(V)}}))}}function Ac(e,o,t,r,n){return!t||t.id!==e.variable.id||e.isNegated!==r?!1:(t.providerId||n)===o}function Dc(e,o){if(e===o)return!0;let t=sr(e);if(t?.kind!=="externalModuleExport")return e===o;let r=sr(o);return r?.kind!=="externalModuleExport"?e===o:t.moduleId===r.moduleId&&t.exportSpecifier===r.exportSpecifier}var As="t3p7r61",Ds="t1ih3ztb",zs="wkaasce",_s="w1vx93q9",Gs="wof63pb";var Be=u(h(),1);function Us({title:e,className:o,displayPlusIcon:t,primaryMenuIsOpen:r,educationTooltip:n,disableTitleTooltip:i=!1,titleTooltip:a,overridden:l,...s}){return(0,Be.jsxs)("div",{className:P(As,t&&P(zs,(r||l)&&_s),o),title:e===" "||i?void 0:a??e,...s,children:[t&&(0,Be.jsx)(Di,{}),(0,Be.jsx)("div",{className:P(eo,Ds,l&&Gs),children:(0,Be.jsx)(da,{children:e})}),n&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)(Pt,{size:Ee.css.inputSpacing}),n]})]})}var Ls="p1oxlfbn",qs="w1xpzgm5",Hs="w1chribc";var Go=u(h(),1),ko=({title:e,titleClassName:o,children:t,className:r,style:n,disableTitleTooltip:i=!1,titleTooltip:a,reorderColumnCount:l,reorderControlHidden:s,withButtonCursor:p=!1,displayPlusIcon:d=!1,isOverridden:c=!1,primaryMenuIsOpen:C=!1,onMouseDown:g,onContextMenu:y,ReorderControl:T,educationTooltip:b,...x})=>{let m=T!==void 0;m&&Ze(l)&&(n={...n,"--reorder-column-count":l});let f=y?{onContextMenu:y,role:"button"}:{},v=g?{onMouseDown:g,role:"button"}:{};return(0,Go.jsxs)("div",{className:P(Ls,m&&qs,r,p&&Hs),style:n,tabIndex:-1,...f,...v,...x,children:[e&&(0,Go.jsx)(Us,{overridden:c,title:e,disableTitleTooltip:i,titleTooltip:a,className:o,displayPlusIcon:d,educationTooltip:b,onMouseDown:g,primaryMenuIsOpen:C}),t,m&&!s&&(0,Go.jsx)(T,{})]})};var Ur=u(h(),1);function We({onContextMenu:e,children:o,onAdd:t,onDelete:r,onResetToDefault:n,onCopy:i,onPaste:a,onSetAsDefault:l,deleteTitle:s,copyTitle:p,pasteTitle:d,addEnabled:c=!0,deleteEnabled:C=!0,pasteEnabled:g,copyEnabled:y,resetToDefaultEnabled:T,setAsDefaultVisible:b=!1,withReorderControl:x=!1,traitTypes:m,traitTypeKeys:f,variableType:v,variableCreationType:S,variableReferenceType:V,variableFilter:E=void 0,dynamicValue:I,onCreateVariable:A,onSelectVariable:M,onRemoveDynamicValue:W,supportsVariables:F=!1,collectionReferenceDataIdentifier:R,vectorSetIdentifier:ae,controlSourceIdentifier:te,controlKey:Q,allowedFileTypes:Z,supportsComputedValues:de=!1,onSelectComputedValue:ue,displayTransformOptions:j,computedValuePopoutId:se,supportsFetchDataValues:Pe,onSelectFetchDataValue:re,educationTooltipId:ee,className:ce,panelRowApiRef:bo,...U}){let ne=O(),le=q(),He=Ea(f,m),[Jo,$o]=we.default.useState(!1),Ap=Gc(),Xo=Ns({variableType:v,variableCreationType:S,variableReferenceType:V,dynamicValue:I,onCreateVariable:A,onSelectVariable:M,onRemoveDynamicValue:W,supportsVariables:F,collectionReferenceDataIdentifier:R,vectorSetIdentifier:ae,controlSourceIdentifier:te,controlKey:Q,allowedFileTypes:Z,supportsComputedValues:Ap&&de,onSelectComputedValue:ue,displayTransformOptions:j,computedValuePopoutId:se,variableFilter:E}),jo=vs({supportsFetchDataValues:Pe??!1,onSelectFetchDataValue:re}),fn=!!Xo||!!jo,or=!!(t&&c&&!le),tr=!!(r&&C&&!le),gn=!!n,Dp=(0,we.useCallback)(async Ke=>{let{clientX:nr,clientY:ir}=Ke;(or||tr||i||a||gn||l&&b)&&(Ke.preventDefault(),ne.stores.contextMenuStore.show([{label:p||"Copy",click:i,visible:!!i,enabled:cr(y)?y():y},{label:d?await d():"Paste",click:a,visible:!!a,enabled:!le&&(cr(g)?await g():g)},{type:"separator"},{label:"Add",click:t,visible:or},{label:s||"Remove",click:r,visible:tr},{label:"Reset to Default",click:n,enabled:!le&&T,visible:!!n},{label:"Set as Default",click:l,enabled:!le&&!!l,visible:!!l&&b}],{location:{x:nr,y:ir}}))},[or,tr,i,a,gn,l,b,p,y,d,le,g,t,s,r,n,T]),rr=(0,we.useCallback)(async(Ke,nr=!1)=>{let{target:ir,currentTarget:bn}=Ke,yn=Ne(ne)&&hs(ne),zp=yn&&!!(m||f);if(!nr&&(!ba.isLeftMouseClick(Ke)||ir!==bn))return;let ar=Xo?.();if(!Xo&&!He&&!jo)return;let No=[];ar&&No.push(...ar);let hn=jo?.();hn&&(ar&&No.push({type:"separator"}),No.push(...hn)),No.push({type:"separator"},{label:"Reset Override",click(){Ne(ne)&&Cs(ne,m,f)},enabled:!le&&yn&&xs(ne,m,f),visible:Ne(ne)&&zp});let xn=Ke.currentTarget.getBoundingClientRect(),_p={x:xn.left,y:xn.bottom};$o(!0),ne.stores.contextMenuStore.show(No,{location:_p,onDone:()=>$o(!1),submenuPlacement:"left-start"})},[m,f,Xo,He,jo,le]);return(0,we.useImperativeHandle)(bo,()=>({displayPrimaryMenu:Ke=>rr(Ke,!0)}),[rr]),(0,Ur.jsx)(ko,{withButtonCursor:He||fn,displayPlusIcon:fn,onMouseDown:rr,isOverridden:He,primaryMenuIsOpen:Jo,onContextMenu:e??Dp,ReorderControl:x?ys:void 0,educationTooltip:ee?(0,Ur.jsx)(fs,{tooltipId:ee}):void 0,className:ce,...U,children:o})}var Lr=(0,we.createContext)(!1);Lr.displayName="ComputedValuesSupportedContext";var zg=Lr.Provider;function Gc(){return(0,we.useContext)(Lr)}var Ks=u(L(),1);function Zs(e){let o=O(),{isDarkMode:t}=co(),r=vo("ColorStyleTokens",()=>{if(ct(e)){let a=Ta(o.tree,e.stops,t);return{name:void 0,value:e.updated({stops:a}).toCSS()}}else{let a=Ye(e)?je(e):null;if(!a)return null;let l=o.tree.get(a);return rt(l)?{name:l.name,value:l.colorForMode(t)}:null}},[e,t]),n=r?.name,i=r?.value;return(0,Ks.useMemo)(()=>i?{name:n,value:i}:null,[n,i])}function jg(){let{isDarkMode:e}=co(),o=O();return wo(()=>{let t=Ci.get(o.tree);if(!t)return;let r={};for(let n of t.children)r[jn(n)]=n.colorForMode(e);return r},[e],["ColorStyleTokens"],{deepEqual:!0})}var Js="c1avmyds",$s="lzm78je",Xs="caoupms",js="i3vlae9",Ys="iyiuvk1";var Uo=u(h(),1);function Lc(e,o,t,r=z.swatchBorderPlaceholder,n="white"){let i={boxShadow:`inset 0 0 0 1px ${r}`,backgroundColor:n};return e.includes("gradient")||e.includes("url")?(i.backgroundImage=e,i.backgroundRepeat="no-repeat",i.backgroundSize="cover",i.backgroundPositionX=o??"center",i.backgroundPositionY=t??"center"):i.backgroundColor=e,i}function Qs({large:e,background:o,borderColor:t,backgroundPositionX:r,backgroundPositionY:n,defaultBackgroundColor:i}){let l=Zs(o)?.value??o;return(0,Uo.jsxs)("div",{className:P(Js,e&&$s),children:[(0,Uo.jsx)("div",{className:P(Xs)}),(0,Uo.jsx)("div",{className:P(js,e&&Ys),style:Lc(l,r,n,t,i)})]})}var el="wkxdsnf",ol="l2ga4t0";var tl=u(h(),1);function D({large:e,borderColor:o,background:t=z.tint,color:r="#fff",children:n,className:i}){let a=o?`inset 0 0 0 1px ${o}`:void 0;return(0,tl.jsx)(Qe,{className:P(el,e&&ol,i),style:{background:t,color:r,boxShadow:a},children:n})}var Bt="i1ab0gin",rl="l19ygcxe",nl="i1mqt5la",Wt="t1bkmsxp",il="t1vpcft3",al="suf63yr",sl="c1hu2nje",ll="leca1mf",qr="d1ir7ssq",pl="sojarwo";var cl="b11f2aom",ul="r1ihmrto",dl="t8942cu",ml="a11ph0ck";var w=u(h(),1);function H(e){switch(e){case"action":case"aiStyleUpsell":case"border":case"collectionFilter":case"collectionOrder":case"customCursor":case"effect":case"eventSuggestion":case"font":case"formDestination":case"formSelectOption":case"grid-guides":case"line":case"link":case"linkOptions":case"linkRelValues":case"noItems":case"object":case"pageEffectExit":case"pagination":case"preset":case"scrollSection":case"sizeConstraint":case"spring":case"textSelection":case"transition":case"trigger":case"tween":return z.swatchBackgroundPlaceholderForBorder;case"fill":return z.swatchBackgroundPlaceholderForFill;case"color":case"icon":case"shadow":case"stroke":return"transparent";case"mask":return`linear-gradient(180deg, ${z.maskEmptyGradientStop1} 0%, ${z.maskEmptyGradientStop2} 100%)`;default:De(e)}}function Zc(e){if(e==="mask")return"transparent"}function Jc(e){return e==="action"?"Reset\u2026":e==="aiStyleUpsell"?"Upgrade\u2026":e==="pageEffectExit"?"Add Exit\u2026":"Add\u2026"}function $c(e,o){return o||(e==="action"?"Reset Override":e==="eventSuggestion"?"Add Interaction":`Add ${Qo(e)}`)}function Ob({type:e,className:o,icon:t,tooltipTitle:r,...n}){let i=q();return(0,w.jsx)("div",{...n,className:P(pe,o,i&&ul),children:(0,w.jsxs)("div",{className:cl,title:$c(e,r),children:[(0,w.jsx)("div",{className:P(Bt,i&&nl,(e==="action"||e==="eventSuggestion")&&ml),children:t??(0,w.jsx)(Xc,{type:e})}),(0,w.jsx)("div",{className:P(eo,Wt,dl),children:Jc(e)})]})})}function Xc({type:e}){switch(e){case"action":case"eventSuggestion":return(0,w.jsx)(gt,{});case"aiStyleUpsell":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Ui,{})});case"effect":case"pageEffectExit":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Vi,{})});case"line":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Mi,{})});case"link":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(_i,{})});case"linkOptions":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(vr,{})});case"linkRelValues":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(bt,{background:"transparent"})});case"grid-guides":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Si,{})});case"sizeConstraint":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Gi,{})});case"pagination":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Fi,{})});case"noItems":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Bi,{})});case"collectionFilter":return(0,w.jsx)(D,{background:H(e),color:"transparent",children:(0,w.jsx)(ut,{})});case"collectionOrder":return(0,w.jsx)(D,{background:H(e),color:"transparent",children:(0,w.jsx)(Wi,{})});case"spring":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Li,{})});case"tween":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(wr,{})});case"object":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(ki,{})});case"font":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Hi,{})});case"scrollSection":return(0,w.jsx)(D,{color:H(e),children:(0,w.jsx)(yt,{})});case"customCursor":return(0,w.jsx)(D,{color:H(e),children:(0,w.jsx)(mt,{})});case"formDestination":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(vr,{})});case"formSelectOption":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(zi,{})});case"transition":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(wr,{})});case"textSelection":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(qi,{})});case"trigger":return(0,w.jsx)(D,{background:H(e),children:(0,w.jsx)(Ei,{})});default:return(0,w.jsx)(Qs,{background:H(e),borderColor:z.swatchBorderPlaceholder,defaultBackgroundColor:Zc(e)})}}var fl=u(L(),1);var Te=u(h(),1),At=({enabled:e,large:o,title:t,titleColor:r,shortcutKey:n,preview:i,deleteIconColor:a,swatchBackgroundColor:l,suggestion:s,onDelete:p,deleteTitle:d="Remove"})=>{let c=(0,fl.useCallback)(g=>{g.stopPropagation(),p?.(g)},[p]),C=Ti(c);return(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("div",{className:P(Bt,o&&rl,e===!1&&qr),style:{backgroundColor:l},children:i}),(0,Te.jsxs)("div",{className:P(Wt,e===!1&&qr,s&&pl,!p&&il),style:{color:r},children:[typeof t=="string"?(0,Te.jsx)("span",{className:eo,children:t}):t,n&&(0,Te.jsxs)("span",{className:al,children:["\xA0(",n,")"]})]}),p&&(0,Te.jsx)("div",{className:P(sl,o&&ll),...C,style:{color:a},title:d,children:(0,Te.jsx)(dt,{})})]})};var Dt="bwfcdld",gl="b4uva9g",bl="d1xdslsy",yl="dpa1954";var Hr=u(h(),1);function Hb({id:e,testId:o,popout:t,navigationTitle:r,navigationClassName:n,enabled:i,displayDivider:a,displayInPopover:l,popoverAttachmentEdge:s,popoverOffset:p,showArrow:d,fallbackToModalAppearance:c,title:C,shortcutKey:g,preview:y,suggestion:T,onDelete:b,onBeforePresent:x,onPresent:m,onDismiss:f,className:v,doubleColumn:S=!0,sortable:V=!1,large:E=!1,titleColor:I,deleteTitle:A,deleteIconColor:M,swatchBackgroundColor:W,educationTooltipId:F,educationText:R,onClickEducation:ae,onContextMenu:te,autoFocusInside:Q}){let Z=q(),de=ue=>{ue.key==="Delete"&&b?.(ue)};return(0,Hr.jsx)(Fa,{id:e,large:E,enabled:i,popout:t,navigationTitle:r,navigationClassName:n,displayDivider:a,displayInPopover:l,autoFocusInside:Q,popoverAttachmentEdge:s,popoverOffset:p,showArrow:d,fallbackToModalAppearance:c,onBeforePresent:x,className:P(Dt,E&&gl,S&&pe,V&&St,i===!1&&yl,v),onContextMenu:te,onKeyDown:de,onPresent:m,onDismiss:f,educationTooltipId:F,educationText:R,onClickEducation:ae,"data-testid":o,children:(0,Hr.jsx)(At,{title:C,titleColor:I,deleteIconColor:M,swatchBackgroundColor:W,preview:y,suggestion:T,enabled:i,large:E,shortcutKey:g,deleteTitle:A,onDelete:Z?void 0:b})})}var uo=u(L(),1);var Lo=[];function Pl(e){(0,uo.useEffect)(()=>(Lo=[e,...Lo],()=>{Lo=Lo.filter(o=>o!==e)}),[e])}function jb({globalKeyBindings:e}){let o=(0,uo.useCallback)(n=>{let i=e.get(n);i&&(Me("keyboard_shortcut",{shortcut:kt(n)}),i.action(n))},[e]),t=(0,uo.useCallback)(async n=>{hi(n)||n.clipboardData&&Sr(n.type,{event:n})},[]),r=(0,uo.useCallback)(async n=>{if(!n.defaultPrevented){for(let i of Lo)if(await i(n),n.defaultPrevented)return;Sr(n.type,{event:n})}},[]);(0,uo.useEffect)(()=>(window.addEventListener("keydown",o),window.addEventListener("copy",t,!0),window.addEventListener("cut",t,!0),window.addEventListener("paste",r,!0),window.addEventListener("wheel",Cl,{passive:!1}),window.addEventListener("touchmove",xl,{passive:!1}),()=>{window.removeEventListener("keydown",o),window.removeEventListener("copy",t,!0),window.removeEventListener("cut",t,!0),window.removeEventListener("paste",r,!0),window.removeEventListener("wheel",Cl),window.removeEventListener("touchmove",xl)}),[o,r,t])}function xl(e){e.touches.length>1&&(e.preventDefault(),e.stopPropagation())}function Cl(e){!e.defaultPrevented&&e.ctrlKey&&e.preventDefault()}var jc=/^0(?=\.)/u;function zt(e){return(Math.trunc(e*100)/100).toString().replace(jc,"")}function vl(e=1){if(e===0)return"0";if(e===1)return"1.0";let o=e*100;return o%10===0?`.${o}`:zt(e)}function wl(e){let o=zt(e.r),t=zt(e.g),r=zt(e.b);return`${o}, ${t}, ${r}`}var Ae=e=>Vn(0,100,Math.round(e*100)),ge=()=>{vt({type:"add",variant:"info",icon:"color-wheel",primaryText:"Increase color opacity",secondaryText:"to see changes.",key:"color-change-null-opacity",duration:300})};function my(e,o,t){if(it(e)||J(e))return{title:t||"Add\u2026"};if(gi(e))return{title:"Linear"};if(bi(e))return{title:"Radial"};if(fi(e))return{title:"Conic"};if(!B(e)||e==="")return{title:"Mixed"};if(Ye(e)){let n=je(e),i=n?Po(n,o.tree):null;if(i)return{title:i.name};{let a=at(e);if(!a)return{title:"Unknown"};e=a}}if(Y.isP3String(e)){let n=me.fromString(e);return n?{title:wl(n),alpha:vl(n.a)}:{title:"Unknown"}}let r=typeof e=="string"?Y(e):null;return r?{title:Y.toHex(r).toUpperCase(),alpha:r.a??1}:{title:"Unknown"}}function Tl(){let e=O();return vo(["AssetMap"],()=>e.stores.assetStore.assetMap.hash)}function _t(e){let o=Sa();if(!o)return e;let t=o(e,{preferredSize:"small"});return t||e}function Yc(e,o){return Tl(),e?_t(e):o}function wy(e,o){let t=Yc(e);return t?`url("${t}")`:o}var Il=u(L(),1),Ue=null,Qc=Cn("globalPreviewHandlers");function Kr(e){Qc.warn("Missing handler",e)}var eu={reload:()=>{Ue?.reload?Ue.reload():Kr("reload")},toggleConsole:()=>{Ue?.toggleConsole?Ue.toggleConsole():Kr("toggleConsole")},openFullScreen:()=>{Ue?.openFullScreen?Ue.openFullScreen():Kr("openFullScreen")}};function kl(e){if(e===null){Ue=e;return}Ue??={},Object.assign(Ue,e)}function Iy(){return eu}function Ry({reload:e,toggleConsole:o,openFullScreen:t}){Il.default.useEffect(()=>(kl({reload:e,toggleConsole:o,openFullScreen:t}),()=>kl(null)),[e,o,t])}function Rl(e){return it(e)?void 0:e}var Io=u(L(),1);var ke=u(L(),1);var Zr=u(h(),1),Gt=e=>{let o=O(),t=q(),{doubleColumn:r,sortable:n,tooltip:i,tabIndex:a=0,onDuplicate:l,onDelete:s,onPresent:p,onCopy:d,className:c,shortcutKey:C,...g}=e;function y(x){o.stores.contextMenuStore.show([{label:"Duplicate",click:l,enabled:!t,visible:!!l},{label:"Copy",click:d,visible:!!d},{label:"Remove",click:()=>s?.(void 0),enabled:!t,visible:!!s}],{location:{x:x.clientX,y:x.clientY}})}let T=x=>{x.key==="Delete"&&s?.(x)},b=ht(a);return(0,Zr.jsx)("div",{role:"button",title:i,onContextMenu:y,onClick:p,onKeyDown:T,tabIndex:e.enabled===!1?-1:b,className:P(Dt,e.enabled===!1&&bl,r&&pe,n&&St,Ma,c),children:(0,Zr.jsx)(At,{...g,onDelete:t?void 0:s})})};var Vl="i1oxwf0f",Sl="ivz66j7",Jr="fjd4qd2",Ol="f1gixrvj";var Nl="p1oi602g",El="s1rsxqtn",Ml="c17esauc";var $=u(h(),1),tu=["auto","lossless","small","medium","large","full"],ru={auto:"Auto",lossless:"Auto (Lossless)",small:"Small",medium:"Medium",large:"Large",full:"Full"};function Ut({multiple:e=!1,imageReferences:o,onChangeImages:t,onRemoveImage:r,onChangeAssetSize:n,extraControls:i,altText:a=Xe,altTextPlaceholder:l,onChangeAltText:s,positionX:p,positionY:d,enableFooter:c=!0,maxExtraImages:C,onEditFocalPoint:g,clearFocalPoint:y,onCropClick:T,onImageBatchUpload:b}){let x=O(),m=za(),f=q(),v=Ze(C)?C+1:void 0,[S,V]=ke.default.useState(!1),E=ke.default.useRef(null),I=ke.default.useCallback(()=>{f||t(Vr.pickAndUploadImage({multiple:e,maxUploads:v}).then(Fl("upload")))},[t,f,e,v]),A=ke.default.useCallback(U=>{(U.key==="Backspace"||U.key==="Delete")&&!f&&r?.()},[r,f]),M=ke.default.useCallback(U=>{f||U.dataTransfer&&b&&t(b(U.dataTransfer.files,v).then(Fl("drop")))},[t,f,v,b]),W=ke.default.useCallback(U=>{U.preventDefault(),r&&x.stores.contextMenuStore.show([{label:"Delete",enabled:!f,click:r}],{location:{x:U.clientX,y:U.clientY}})},[f,r]),F=ke.default.useCallback(async U=>{if(f)return;let ne=E.current;if(!ne||document.activeElement!==ne)return;U.preventDefault();let le=U.clipboardData;le&&t(Vr.addImages(le.files))},[t,f]);Pl(F);let R=ke.default.useCallback(()=>{V(!0)},[]),ae=ke.default.useCallback(()=>{V(!1)},[]),te=o[0],{fileExtensions:Q,preferredSizes:Z}=iu(o),de=o.length>0,ue=xe(o),j=B(ue)&&ue.length>0,se=!J(p)&&!J(d),Pe=Q.has("svg"),re=de&&Z.size>0&&!Pe,ee=ke.default.useCallback(()=>{te&&T?.(te,t)},[te,t,T]),ce=()=>{k(B(ue)&&ue.length>0),g?.(ue,Oe(p)?p:void 0,Oe(d)?d:void 0)},bo=te&&_t(te);return(0,$.jsxs)(Fe,{direction:"column",children:[(0,$.jsxs)(ga,{className:P(Nl,te&&El),onDrop:M,onDragEnter:R,onDragLeave:ae,onKeyDown:A,onDoubleClick:I,onContextMenu:W,children:[(0,$.jsx)("div",{ref:E,tabIndex:0,className:nu(S),children:(0,$.jsx)("img",{src:bo,alt:"",decoding:"async"})}),!f&&(0,$.jsx)(oo,{variant:"clean",title:e?"Choose Images\u2026":"Choose Image\u2026",onClick:I,onDoubleClick:Da,className:Ml})]},te),(0,$.jsxs)(Fe,{direction:"column",gap:0,children:[!J(n)&&(0,$.jsx)(ko,{title:"Resolution",children:(0,$.jsxs)(ro,{enabled:re,wrapperClassName:pe,children:[(0,$.jsx)(Ce,{title:Q.size>1?"Mixed":"Auto",selected:!0,onSelect:Pa,enabled:!1,visible:Pe}),!Pe&&!J(n)&&tu.map(U=>(0,$.jsx)(Ce,{title:ru[U],identifier:U,selected:Z.has(U),onSelect:n},U))]})}),i,Fo(a)&&!J(s)&&(0,$.jsx)(ko,{title:"Alt Text",children:(0,$.jsx)(Ct,{value:B(a)?a:"",onChange:s,className:pe,placeholder:l??(ho(ue)?"Mixed":"Describe Image\u2026"),enabled:de})}),!J(g)&&!J(y)&&(0,$.jsx)(ko,{title:"Focal Point",children:(0,$.jsx)(Gt,{doubleColumn:!0,onPresent:ce,enabled:j&&!f,onDelete:se?y:void 0,title:se?"Custom":"Add\u2026",titleColor:se?void 0:z.inputLabel,tooltip:se?"Edit Focal Point":"Add Focal Point",preview:(0,$.jsx)(D,{color:z.popupButtonPreviewIconPrimary,background:z.popupButtonPreviewIconBackground,children:(0,$.jsx)(Do,{})})})}),c&&(0,$.jsxs)(Fe,{direction:"row",className:Ol,children:[(0,$.jsx)("div",{className:Jr,children:(0,$.jsx)(oo,{title:"Crop",enabled:!f&&!!te,onClick:ee,className:Jr})}),m&&(0,$.jsx)(m,{commonImageReference:ue,onChangeImages:t,altText:a,onChangeAltText:s})]})]})]})}function nu(e){let o=P(Vl),t=P(o,Sl);return P(e?t:o,"wantsNativeTextAction")}function Fl(e){return o=>{let t=o[0]?oi(o[0].filename)[1].toLowerCase():"";return Me("insert_image",{imageExtension:t,source:`picker_${e}`}),o}}function iu(e){let o=new Set,t=new Set;return e.forEach(r=>{let n=st(r);n&&(o.add(n.preferredSize||"auto"),t.add(n.fileExtension))}),{preferredSizes:o,fileExtensions:t}}var $r=u(h(),1);function Wl({multiple:e=!1,imageReference:o,onChange:t,onChangeAssetSize:r,altText:n=Xe,altTextPlaceholder:i,onChangeAltText:a,onRemoveImage:l,positionX:s,positionY:p,onChangeFocalPosition:d,maxExtraImages:c,enableFooter:C=!0}){let g=O(),y=(0,Io.useCallback)((m,f)=>Tt(g,m,f),[]),T=(0,Io.useCallback)(m=>{g.stores.modalStore.push({type:"ImageCrop",initialImage:m,onChange:t,source:"image_picker"})},[t]),b=(0,Io.useMemo)(()=>{if(d)return(m,f,v)=>{g.stores.modalStore.push({type:"ImageFocalPoint",image:m,positionX:f,positionY:v,onChange:d,source:"properties"})}},[d]),x=(0,Io.useMemo)(()=>{if(d)return()=>{d(void 0,void 0)}},[d]);return(0,$r.jsx)(Fe,{padding:`0 ${Ee.css.panelPadding} ${Ee.css.panelPadding}`,children:(0,$r.jsx)(Ut,{multiple:e,maxExtraImages:c,imageReferences:o?[o]:[],onChangeImages:t,onChangeAssetSize:r,altText:n,altTextPlaceholder:i,onChangeAltText:a,onRemoveImage:l,positionX:s,positionY:p,onImageBatchUpload:y,onCropClick:T,onEditFocalPoint:b,clearFocalPoint:x,enableFooter:C})})}var Dl=u(L(),1);function Al(e,o){let t={type:"image",value:void 0};e&&B(e.value)&&(t.value=e.value),qn(e)&&(t.valueLocalized=e.valueLocalized),Kn(e)&&(t.alt=e.alt),Zn(e)&&(t.altLocalized=e.altLocalized);let r=Jn(e);return B(r.positionX)&&(t.positionX=r.positionX),B(r.positionY)&&(t.positionY=r.positionY),Object.assign(t,o),t}var zl=u(h(),1);function Mh({controlProp:e,onChange:o,onRemove:t,multiple:r=!1,maxExtraImages:n}){let i=B(e.value)?e.value:void 0,a,l,s,p=e.type==="responsiveimage";p&&(a=e.alt,l=B(e.positionX)?e.positionX:void 0,s=B(e.positionY)?e.positionY:void 0);let d=(0,Dl.useMemo)(()=>{if(i)return st(i)},[i]);function c(b,x){o(m=>Al(m,b),x)}async function C(b){try{let x=await b;if(x.length===0)return;let m=x.filter(E=>E.filename!==""),[f,...v]=m;if(!f)return;let S;r&&v.length>0&&(S=v.map(E=>({type:"image",value:Ir(E)})));let V=au(f,d);c(V,S)}catch(x){yo(x)}}function g(b){if(!i)return;let x=ti(i,b);c({value:x})}function y(b){c({alt:b})}function T(b,x){c({positionX:b,positionY:x})}return(0,zl.jsx)(Wl,{multiple:r,maxExtraImages:n,imageReference:i,onChange:C,onChangeAssetSize:g,onChangeAltText:y,onRemoveImage:t,positionX:l,positionY:s,altText:a??Xe,onChangeFocalPosition:p?T:void 0})}function au(e,o){return{type:"image",value:Ir(e,e.preferredSize??o?.preferredSize),positionX:void 0,positionY:void 0}}function _h(e,o=Ln){let t=O();return vo(["Tree","ActiveBundle"],()=>ri(t.tree,t.componentLoader,e,o),[e,o])}var jr=u(L(),1);var _l="p4b05eq",Gl="prqiyvj",Ul="p1c81r2w",Ll="p1ln12j8";var Ro=u(h(),1),lu=({preset:e,onSelect:o,selected:t})=>{let{isDarkMode:r}=co();return(0,Ro.jsx)("button",{type:"button",onClick:()=>o(e),className:P(Ul,t&&Ll),children:(0,Ro.jsx)("img",{alt:e.name,className:P(Gl),src:r?e.previewImageDark:e.previewImageLight,decoding:"async"})})},ql=({selectedPreset:e,onSelectPreset:o})=>(0,Ro.jsx)(We,{title:"Preset",children:(0,Ro.jsx)("div",{className:P(_l),children:va.map(t=>(0,Ro.jsx)(lu,{preset:t,onSelect:o,selected:e&&e.name===t.name||!1},t.name))})});var Xr="dl1ddfs";var X=u(h(),1),Hl=["Focal Point","Top Left","Top Center","Top Right","Left","Center","Right","Bottom Left","Bottom Center","Bottom Right"];function cu(e,o,t){return k(Fo(e)),k(Fo(o)),ho(e)||ho(o)?Pn:Oe(e)||Oe(o)?t?"Center":"Focal Point":t&&J(e)&&J(o)?"Focal Point":o==="top"?e==="left"?"Top Left":e==="right"?"Top Right":"Top Center":o==="bottom"?e==="left"?"Bottom Left":e==="right"?"Bottom Right":"Bottom Center":e==="left"?"Left":e==="right"?"Right":"Center"}function uu(e){return e.includes("Left")?"left":e.includes("Right")?"right":"center"}function du(e){return e.includes("Top")?"top":e.includes("Bottom")?"bottom":"center"}function mu(e){return e.size>1?!0:!e.has("stretch")}function Kl({title:e="",enabled:o=!0,hasImageVariable:t=!1,imageReferences:r,onChangeImagePosition:n,fillImagePositionX:i,fillImagePositionY:a,fillImageResize:l}){let s=O();if(!mu(l))return null;let p=xe(l),d=p==="fill";d||((J(i)||Oe(i))&&(i=p==="tile"?"left":"center"),(J(a)||Oe(a))&&(a=p==="tile"?"top":"center"));let c=cu(i,a,t),C=c==="Focal Point",g=r?xe(r):Xe;function y(){k(B(g)),s.stores.modalStore.push({type:"ImageFocalPoint",image:g,positionX:Oe(i)?i:void 0,positionY:Oe(a)?a:void 0,onChange:n,source:"properties"})}let T=m=>{if(m==="Focal Point"){t?n(void 0,void 0):y();return}let f=uu(m),v=du(m);n(f,v)},b=B(g),x=[];return ho(c)&&(x.push((0,X.jsx)(Ce,{selected:!0,title:"Mixed"},"mixed")),x.push((0,X.jsx)(Ce,{type:"divider"},"mixed-divider"))),Hl.forEach((m,f)=>{m==="Focal Point"&&(!d||!t&&!b&&!C)||(x.push((0,X.jsx)(Ce,{title:m,onSelect:T,identifier:m,selected:c===m},f)),f%3===0&&x.push((0,X.jsx)(Ce,{type:"divider"},f+"divider")))}),(0,X.jsx)(We,{title:e,children:!t&&C&&b?(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(Gt,{doubleColumn:!0,enabled:o,title:"Focal Point",tooltip:"Edit Focal Point",onPresent:y,onDelete:()=>T("Center"),preview:(0,X.jsx)(D,{className:P(!o&&Xr),color:z.popupButtonPreviewIconPrimary,background:z.popupButtonPreviewIconBackground,children:(0,X.jsx)(Do,{})})})}):(0,X.jsx)(ro,{enabled:o,wrapperClassName:pe,preview:(0,X.jsx)(D,{className:P(!o&&Xr),color:c==="Focal Point"?z.popupButtonPreviewIconPrimary:void 0,background:z.popupButtonPreviewIconBackground,children:c==="Focal Point"?(0,X.jsx)(Do,{}):(0,X.jsx)(fu,{selectedOption:c,optionItems:Hl,firstPositionKey:"Top Left"})}),children:x})})}function fu({selectedOption:e,optionItems:o,firstPositionKey:t}){let r=o.indexOf(t);k(r!==-1);let n=B(e)?o.indexOf(e)-r:-1;return(0,X.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",children:Array(3).fill(null).map((i,a)=>(0,X.jsxs)("g",{transform:`translate(3 ${3+6.5*a})`,children:[(0,X.jsx)("path",{d:"M 1.5 0 C 2.328 0 3 0.672 3 1.5 C 3 2.328 2.328 3 1.5 3 C 0.672 3 0 2.328 0 1.5 C 0 0.672 0.672 0 1.5 0 Z",fill:n===a*3?z.popupButtonPreviewIconPrimary:z.popupButtonPreviewIconSecondary}),(0,X.jsx)("path",{d:"M 8 0 C 8.828 0 9.5 0.672 9.5 1.5 C 9.5 2.328 8.828 3 8 3 C 7.172 3 6.5 2.328 6.5 1.5 C 6.5 0.672 7.172 0 8 0 Z",fill:n===1+a*3?z.popupButtonPreviewIconPrimary:z.popupButtonPreviewIconSecondary}),(0,X.jsx)("path",{d:"M 14.5 0 C 15.328 0 16 0.672 16 1.5 C 16 2.328 15.328 3 14.5 3 C 13.672 3 13 2.328 13 1.5 C 13 0.672 13.672 0 14.5 0 Z",fill:n===2+a*3?z.popupButtonPreviewIconPrimary:z.popupButtonPreviewIconSecondary})]},a))})}var Lt=u(h(),1),gu=["fill","fit","stretch","tile"];function Zl({title:e="",enabled:o=!0,fillImageResize:t,onChangeImageResize:r}){return(0,Lt.jsx)(We,{title:e,children:(0,Lt.jsx)(ro,{enabled:o,wrapperClassName:pe,children:gu.map(n=>(0,Lt.jsx)(Ce,{identifier:n,title:Mn,selected:t.has(n),onSelect:r},n))})})}var Jl=u(L(),1);var qo=u(h(),1),bu=e=>{let o=Rl(e);return Ze(o)?Math.round(o*100):o};function $l({onChange:e,value:o,enabled:t,title:r}){let n=bu(o),i=(0,Jl.useCallback)(a=>{e(Rn(a/100,2))},[e]);return(0,qo.jsxs)(We,{title:r,children:[(0,qo.jsx)(oe,{enabled:t,precision:0,value:n,unit:"%",onChange:i,min:1,step:1}),(0,qo.jsx)(ya,{enabled:t,value:n,min:1,max:200,step:1,onChange:i})]})}var Ie=u(h(),1);function _x({imageReferences:e,fillImageResize:o,onChangeImages:t,onRemoveImage:r,onChangeImageResize:n,onChangeAssetSize:i,altText:a,onChangeAltText:l,fillImagePositionX:s,fillImagePositionY:p,onChangeImagePosition:d,fillImageTileSize:c,onChangeFillImageSize:C,onSelectTilePatternPreset:g}){let y=O(),T=xe(e),b=o&&xe(o)==="tile"&&Un(T)?wa(T):void 0,x=(0,jr.useCallback)((f,v)=>Tt(y,f,v),[]),m=(0,jr.useCallback)(f=>{y.stores.modalStore.push({type:"ImageCrop",initialImage:f,onChange:t,source:"image_picker"})},[t]);return(0,Ie.jsx)(Fe,{direction:"column",padding:`0 ${Ee.css.panelPadding} ${Ee.css.panelPadding}`,children:(0,Ie.jsx)(Ut,{imageReferences:Array.from(e),onChangeImages:t,onRemoveImage:e.size>0?r:void 0,onChangeAssetSize:i,altText:a,onChangeAltText:l,onImageBatchUpload:x,onCropClick:m,extraControls:o&&(0,Ie.jsxs)(Ie.Fragment,{children:[!J(n)&&(0,Ie.jsx)(Zl,{title:"Type",enabled:!0,fillImageResize:o,onChangeImageResize:n}),!J(g)&&xe(o)==="tile"&&(0,Ie.jsx)(ql,{selectedPreset:b,onSelectPreset:g}),!J(C)&&xe(o)==="tile"&&(0,Ie.jsx)($l,{title:"Scale",value:c,onChange:C,enabled:e.size>0}),!J(d)&&(0,Ie.jsx)(Kl,{title:"Position",imageReferences:e,enabled:e.size>0,fillImageResize:o,fillImagePositionX:s,fillImagePositionY:p,onChangeImagePosition:d})]})})})}var cn=u(L(),1);var Yr="https://app.framerstatic.com/checkerboard-8-776AE4U3.svg";var Qr=125,en=230,Xl="s1e2z0bv",on="rb8k8h9",jl="iihdl0y",io="swsq73a",Yl="t1ecuz16",Vo="f10aiog9",ie="i19bkgmo",Ql="hqo5o69",So="l7n5mtt",Le="c1424kp4",Oo="r1k5sn29",ep="s1hh4y0v";var qt=u(h(),1);function Ht({colorModel:e,onChangeColorModel:o}){let t=q();return(0,qt.jsx)(xt.Provider,{value:!1,children:(0,qt.jsx)(ro,{children:Va.map(r=>(0,qt.jsx)(Ce,{title:r,identifier:r,selected:r===e,onSelect:o,enabled:e==="P3"||r==="P3"?!t:!0},r))})})}var qe=u(L(),1);var op="s1547mmt",tp="siommo3",Kt="ixdcado",rp="csdqxt6",np="h10f07ai",tn="i1y4xa9u",ip="cawslk",ap="o104dadf",rn="r1u3lu2p",sp="hz6ma7m",lp="p1bt5whn",pp="iehmvlc";var cp="s1klz3oz";var up="s10ppfb8";var nn=u(h(),1);function Zt({enabled:e,className:o,onChange:t}){let r=O(),n=r.scheduler.wrapHandler(()=>{wt(r).then(i=>{i&&t(i)}).catch(yo)});return(0,nn.jsx)(oo,{className:P(up,o),enabled:e,onClick:n,title:"Sample Color",children:(0,nn.jsx)(Ai,{})})}var _=u(h(),1);function Cu(e){return Math.max(0,Math.min(e,1))}function Pu(e){return qe.default.useMemo(()=>{let o=me.fromString(e);return k(o,"Invalid color "+e),{hsv:o.hsv(),p3:o}},[e])}var dp=qe.default.memo(function({className:o,style:t,colorString:r,onChange:n,onChangeColorModel:i}){let a=O(),l=q(),{hsv:s,p3:p}=Pu(r),{h:d,s:c,v:C,a:g}=s,y=qe.default.useRef(!1),T=qe.default.useRef(void 0),b=qe.default.useRef(d),x=Na(),m=po(()=>{a.beginUndoGroup()},[]),f=po(()=>{a.endUndoGroup()},[]),v=po(Q=>{let Z=me.fromString(r)?.toString("p3",{a:Cu(Q.progress.x??1)});k(Z,"Invalid color "+r),n(Z,!1)},[r,n]),S=po(Q=>{let Z=Q.progress.x*360,de=me.fromHSV({h:Z,s:c,v:C,a:g}).toString();n(de,!1),b.current=Z,g===0&&ge(),c===0&&x()},[c,C,g,n,x]),V=po(Q=>{let{progress:Z}=Q;y.current=!0,T.current=Z;let de=me.fromHSV({h:b.current,s:Z.x,v:1-Z.y,a:g}).toString();n(de,!0),g===0&&ge(),(Z.x===0||1-Z.y===0)&&x()},[g,n,x]),E=po(()=>{y.current=!1,T.current=void 0,f()},[]),I=qe.default.useCallback(Q=>{n(Q,!0)},[n]);c!==0&&C!==0&&!(d===0&&b.current===360)&&!y.current&&(b.current=d);let A=me.fromHSV({h:b.current,s:1,v:1,a:1}),M=A.toString(),W=A.toString("srgb"),F={"--hue":W,"--hue-p3":M},R={"--slider-alpha-0":A.toString("srgb",{a:0}),"--slider-alpha-1":W,"--slider-p3-alpha-0":A.toString("p3",{a:0}),"--slider-p3-alpha-1":M},ae=T.current?.x??c,te=T.current?.y??1-C;return y.current||(T.current=void 0),(0,_.jsxs)("div",{className:o,style:t,children:[(0,_.jsx)("div",{className:P(tp,l&&rn),style:F,children:(0,_.jsxs)(to,{onDragStart:m,onDrag:V,onDragEnd:E,className:op,enabled:!l,children:[(0,_.jsx)("div",{className:Kt,style:an(ae,te,l)}),(0,_.jsx)(Vu,{hue:b.current})]})}),(0,_.jsx)("div",{className:rp,children:(0,_.jsxs)("div",{className:P(l&&rn,np),children:[(0,_.jsx)(to,{onDragStart:m,onDrag:S,onDragEnd:f,enabled:!l,className:sp,children:(0,_.jsx)("div",{className:tn,children:(0,_.jsx)("div",{className:Kt,style:an(b.current/360,.5,l)})})}),(0,_.jsxs)(to,{onDragStart:m,onDrag:v,onDragEnd:f,enabled:!l,style:R,className:ap,children:[(0,_.jsx)("div",{className:ip}),(0,_.jsx)("div",{className:tn,children:(0,_.jsx)("div",{className:Kt,style:an(g,.5,l)})})]})]})}),(0,_.jsx)(Su,{value:p,onChange:I,enabled:!l}),(0,_.jsxs)("div",{className:pp,children:[(0,_.jsx)(Ht,{colorModel:"P3",onChangeColorModel:i}),Yo()||"EyeDropper"in window?(0,_.jsx)(Zt,{onChange:I,enabled:!l,className:cp}):null]})]})});function an(e,o,t){return{left:`${e*100}%`,top:`${o*100}%`,pointerEvents:t?"none":void 0}}function mp(e,o,t){let r=Math.max(Math.ceil((o-e)/(t||1)),0),n=[];for(let i=0;i<r;i++)n[i]=e,e+=t;return n}var vu=mp(0,1,.01),wu=mp(1,0,-.01);function Tu(e){return vu.map(o=>{let{s:t,v:r}=me.fromHSV({h:e,s:o,v:1,a:1},"srgb").hsv();return[t,r]})}function ku(e){return wu.map(o=>{let{s:t,v:r}=me.fromHSV({h:e,s:1,v:o,a:1},"srgb").hsv();return[t,r]})}var Iu=pr([0,1],[0,en]),Ru=pr([0,1],[0,Qr]);function Vu({hue:e}){let o=qe.default.useMemo(()=>{let t="";for(let r of Tu(e).concat(ku(e)))t+=`${Iu(r[0])}, ${Ru(1-r[1])} `;return t},[e]);return(0,_.jsx)("svg",{viewBox:`0 0 ${en} ${Qr}`,role:"presentation",className:lp,children:(0,_.jsx)("polyline",{points:o})})}function sn(e){return Math.trunc(Math.min(Math.max(e,0),1)*1e3)/1e3}function Jt(e,o,t){return qe.default.useCallback(r=>{let n=e==="a"?r/100:r,i=o[e];if(n===i)return;let a=new me({r:o.r,g:o.g,b:o.b,a:o.a??1}).toString("p3",{[e]:n});t(a),e==="a"&&n===0&&ge()},[e,o,t])}function Su({value:e,onChange:o,enabled:t}){let r=Jt("r",e,o),n=Jt("g",e,o),i=Jt("b",e,o),a=Jt("a",e,o);return(0,_.jsxs)("div",{className:P(io,Vo),children:[(0,_.jsx)(oe,{value:sn(e.r),onChange:r,min:0,max:1,step:.01,enabled:t,className:ie,wrapperClassName:So,title:"Red","data-testid":"p3-red-color-input"}),(0,_.jsx)(oe,{value:sn(e.g),onChange:n,min:0,step:.01,max:1,enabled:t,className:ie,wrapperClassName:Le,title:"Green","data-testid":"p3-green-color-input"}),(0,_.jsx)(oe,{value:sn(e.b),onChange:i,min:0,max:1,step:.01,enabled:t,className:ie,wrapperClassName:Le,title:"Blue","data-testid":"p3-blue-color-input"}),(0,_.jsx)(oe,{value:Ae(e?.a??1),onChange:a,unit:"%",min:0,step:1,max:100,enabled:t,className:ie,wrapperClassName:Oo,title:"Alpha","data-testid":"p3-alpha-color-input"})]})}var Ko=u(h(),1);function fp({value:e,onChange:o,sampleColor:t,setColorModel:r,enabled:n}){let i=(s,p,d)=>{if(s.match(/^#?[a-f\d]{1,2}$/iu)){let g=s.startsWith("#")?s.slice(1):s;g.length===1?g=g.repeat(6):g.length===2&&(g=g.repeat(3)),s="#"+g}if(!G.isValid(s))return;(s.startsWith("hsl(")||s.startsWith("hsla("))&&r("HSL"),(s.startsWith("rgb(")||s.startsWith("rgba("))&&r("RGB"),s.match(/^[a-f\d]+$/iu)&&(s="#"+s),s.startsWith("hsv")&&(s=Y.toHslString(Y(s))),/^[a-z]+$/i.test(s.trim())&&(s=Y.toHslString(Y(s)));let c=G.toRgb(s);if(s.startsWith("rgba(")||s.startsWith("hsla(")||s.startsWith("#")&&s.length===9?G.getAlpha(s)===0&&ge():c.a=e.a,Y.equal(Y(c),Y(e)))return d();o(G.rgbaToString(c))},a=s=>{let p={...e,a:s/100},d=G.rgbaToString(p);d&&o(d),p.a===0&&ge()},l=s=>{Ra("sampleColor")===kt(s)&&t()};return(0,Ko.jsxs)("div",{className:P(io,Yl),children:[(0,Ko.jsx)(Ct,{value:G.rgbToHexValue(e).toLocaleUpperCase(),onChange:i,onKeyDown:l,className:P(ie,Ql),"data-testid":"hex-color-input"}),(0,Ko.jsx)(oe,{value:Ae(e.a),onChange:a,unit:"%",min:0,step:1,max:100,enabled:n,className:ie,title:"Alpha","data-testid":"hex-alpha-color-input"})]})}var gp=u(L(),1);var mo=u(h(),1);function $t(e,o,t){return gp.default.useCallback(r=>{let n=e!=="h"?r/100:r;if(n===o[e])return;let i={...o,[e]:n};t(G.hslToString(i)),e==="a"&&n===0&&ge()},[e,o,t])}function bp({value:e,onChange:o,enabled:t}){let r=$t("h",e,o),n=$t("s",e,o),i=$t("l",e,o),a=$t("a",e,o);return(0,mo.jsxs)("div",{className:nt(io,Vo),children:[(0,mo.jsx)(oe,{value:e.h,onChange:r,min:0,max:360,enabled:t,className:ie,wrapperClassName:So,title:"Hue","data-testid":"hsl-hue-color-input"}),(0,mo.jsx)(oe,{value:Ae(e.s),onChange:n,min:0,max:100,enabled:t,className:ie,wrapperClassName:Le,title:"Saturation","data-testid":"hsl-saturation-color-input"}),(0,mo.jsx)(oe,{value:Ae(e.l),onChange:i,min:0,max:100,enabled:t,className:ie,wrapperClassName:Le,title:"Lightness","data-testid":"hsl-lightness-color-input"}),(0,mo.jsx)(oe,{value:Ae(e.a),onChange:a,unit:"%",min:0,max:100,enabled:t,className:ie,wrapperClassName:Oo,title:"Alpha","data-testid":"hsl-alpha-color-input"})]})}var yp=u(L(),1);var fo=u(h(),1);function Xt(e,o,t){return yp.default.useCallback(r=>{let n=e==="a"?r/100:r;if(n===o[e])return;let i={...o,[e]:n};t(G.rgbaToString(i)),e==="a"&&n===0&&ge()},[e,o,t])}function hp({value:e,onChange:o,enabled:t}){let r=Xt("r",e,o),n=Xt("g",e,o),i=Xt("b",e,o),a=Xt("a",e,o);return(0,fo.jsxs)("div",{className:nt(io,Vo),children:[(0,fo.jsx)(oe,{value:e.r,onChange:r,min:0,max:255,enabled:t,className:ie,wrapperClassName:So,title:"Red","data-testid":"rgb-red-color-input"}),(0,fo.jsx)(oe,{value:e.g,onChange:n,min:0,max:255,enabled:t,className:ie,wrapperClassName:Le,title:"Green","data-testid":"rgb-green-color-input"}),(0,fo.jsx)(oe,{value:e.b,onChange:i,min:0,max:255,enabled:t,className:ie,wrapperClassName:Le,title:"Blue","data-testid":"rgb-blue-color-input"}),(0,fo.jsx)(oe,{value:Ae(e.a),onChange:a,unit:"%",min:0,max:100,enabled:t,className:ie,wrapperClassName:Oo,title:"Alpha","data-testid":"rgb-alpha-color-input"})]})}var K=u(h(),1);function ln(e,o){switch(o){case"hsl":return G.hsvToHSLString(e);default:return G.hsvToRgbString(e)}}var jt=class extends cn.default.Component{constructor(){super(...arguments);be(this,"state",{dragging:!1});be(this,"inputRef",cn.default.createRef());be(this,"currentHue",null);be(this,"dragPosition",null);be(this,"onSaturationBrightnessDrag",t=>{let{progress:r}=t,n=G.getAlpha(this.props.color),i={h:this.currentHue||0,s:r.x,v:1-r.y,a:n},a=Y(this.props.color).format,l=ln(i,a);this.dragPosition=r,l&&this.onChange(l,!1),n===0&&ge()});be(this,"setColorModel",this.props.engine.scheduler.wrapHandler(t=>{switch(t){case"P3":{if(Y.isP3String(this.props.color))break;let r=me.fromRGBString(this.props.color)?.toString();k(r,"Invalid color "+this.props.color),this.onChange(r,!0);break}default:{if(!Y.isP3String(this.props.color))break;let r=me.fromString(this.props.color)?.toString("srgb");k(r,"Invalid color "+this.props.color),this.onChange(r,!0);break}}this.props.engine.stores.persistedUserDefaults.colorModel=t}));be(this,"onSaturationBrightnessDragEnd",this.props.engine.scheduler.wrapHandler(()=>{this.onDragEnd()}));be(this,"onHueDrag",this.props.engine.scheduler.wrapHandler(t=>{let r=Y(this.props.color),n=G.toHSV(this.props.color);this.currentHue=t.progress.x*360,n.h=this.currentHue,n.s===0&&this.forceUpdate();let i=ln(n,r.format);i&&this.onChange(i,!1),n.a===0&&ge()}));be(this,"onOpacityDrag",this.props.engine.scheduler.wrapHandler(t=>{let r=G.toHSV(this.props.color);r.a=t.progress.x;let n=ln(r,Y(this.props.color).format);n&&this.onChange(n,!1)}));be(this,"onChange",(t,r)=>{this.props.onChange(t,r??!this.state.dragging)});be(this,"onDragStart",this.props.engine.scheduler.wrapHandler(()=>{this.setState({dragging:!0}),this.props.engine.beginUndoGroup()}));be(this,"onDragEnd",this.props.engine.scheduler.wrapHandler(()=>{this.props.engine.endUndoGroup(),this.setState({dragging:!1}),this.props.onChange(this.props.color,!0)}))}render(){if(Y.isP3String(this.props.color))return(0,K.jsx)(dp,{colorString:this.props.color,className:this.props.className,style:xp,onChange:this.props.onChange,onChangeColorModel:this.setColorModel});let{color:t,className:r}=this.props,n=G.toHSV(t);this.currentHue?n.s!==0&&n.v!==0&&!(n.h===0&&this.currentHue===360)&&!this.state.dragging&&(this.currentHue=Math.round(n.h)):this.currentHue=Math.round(n.h);let i=this.currentHue,a=1-n.v,l=n.s;return this.dragPosition!==null&&(a=this.dragPosition.y,l=this.dragPosition.x),!this.state.dragging&&this.dragPosition!==null&&(this.dragPosition=null),(0,K.jsx)(xt.Consumer,{children:s=>(0,K.jsxs)("div",{className:r,style:xp,children:[(0,K.jsx)("div",{className:P(Xl,s&&on),style:Nu(i),children:(0,K.jsx)(to,{onDragStart:this.onDragStart,onDrag:this.onSaturationBrightnessDrag,onDragEnd:this.onSaturationBrightnessDragEnd,style:Eu,enabled:!s,children:(0,K.jsx)("div",{style:pn(l,a,s)})})}),(0,K.jsx)("div",{style:{width:"100%",display:"flex",margin:`${Ee.css.inputSpacing} 0`},children:(0,K.jsxs)("div",{className:P(s&&on),style:{display:"flex",flexDirection:"column",flexGrow:1,justifyContent:"center"},children:[(0,K.jsx)(to,{onDragStart:this.onDragStart,onDrag:this.onHueDrag,onDragEnd:this.onDragEnd,enabled:!s,style:Mu,children:(0,K.jsx)("div",{style:Cp,children:(0,K.jsx)("div",{style:pn(i/360,void 0,s)})})}),(0,K.jsxs)(to,{onDragStart:this.onDragStart,onDrag:this.onOpacityDrag,onDragEnd:this.onDragEnd,enabled:!s,style:Fu(t),children:[(0,K.jsx)("div",{style:Wu}),(0,K.jsx)("div",{style:Cp,children:(0,K.jsx)("div",{style:pn(n.a,void 0,s)})})]})]})}),(0,K.jsx)(Ou,{colorModel:this.props.colorModel,colorString:this.props.color,onChange:this.onChange,sampleColor:this.props.sampleColor,setColorModel:this.setColorModel}),(0,K.jsxs)("div",{className:jl,children:[(0,K.jsx)(Ht,{colorModel:this.props.colorModel==="P3"?"RGB":this.props.colorModel,onChangeColorModel:this.setColorModel}),Yo()||"EyeDropper"in window?(0,K.jsx)(Zt,{onChange:this.onChange,enabled:!s,className:ep}):null]})]})})}};function Ou({colorModel:e,colorString:o,onChange:t,sampleColor:r,setColorModel:n}){let i=q();switch(e){case"HSL":return(0,K.jsx)(bp,{value:G.toHSL(o),onChange:t,enabled:!i});case"HEX":return(0,K.jsx)(fp,{value:G.toRgb(o),onChange:t,sampleColor:r,setColorModel:n,enabled:!i});default:return(0,K.jsx)(hp,{value:G.toRgb(o),onChange:t,enabled:!i})}}function Nu(e){return{backgroundColor:`${G.toColorPickerSquare(e)}`}}var Eu={position:"absolute",top:1,right:1,bottom:1,left:1},xp={position:"relative"},Pp={position:"relative",width:"100%",height:8,overflow:"visible",borderRadius:6},Mu={...Pp,marginBottom:8,backgroundImage:"linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)"};function Fu(e){return{...Pp,backgroundImage:`linear-gradient(to right, ${G.setAlpha(e,0)}, ${G.setAlpha(e,1)})`,backgroundRepeat:"no-repeat"}}var Cp={position:"absolute",height:"100%",top:0,left:4,right:4},Bu={position:"absolute",width:14,height:14,top:"50%",transform:"translateX(-50%) translateY(-50%)",borderRadius:"50%",boxShadow:"inset 0 0 0 3px white, inset 0 0 0 4px rgba(0,0,0,.1), 0 0 0 1px rgba(0,0,0,.1)",cursor:ai.button};function pn(e,o=.5,t){return{...Bu,left:`${e*100}%`,top:`${o*100}%`,pointerEvents:t?"none":void 0}}var Wu={position:"absolute",width:"100%",height:"100%",backgroundImage:`url(${Yr})`,backgroundRepeat:"repeat",borderRadius:10,zIndex:-1};var vp="c2orl3y",nP="c1svq14t",iP="c1j2rli7",wp="s1cbpxcr",Tp="sxhu8tk",kp="c1yp40qr",Ip="czr60e9",Rp="c1azw9i";var ye=u(L(),1);var go=u(h(),1);function Vp({value:e,colorModel:o,isDarkMode:t,onChangeColor:r}){let n=O(),[i,a]=(0,ye.useState)(null),l=(0,ye.useRef)(null),[s,p]=(0,ye.useState)({}),[d,c]=(0,ye.useState)(null),[C,g]=(0,ye.useState)(!1),y=Du({token:null,isDarkMode:t,imageFill:!1,value:e,colorStopSelection:void 0,pendingExternalColor:d,colorForExternalColor:s,setPendingExternalColor:c}),T=(0,ye.useCallback)(m=>{let v=m.target.scrollTop>0;v!==C&&g(v)},[C]),{handleChangeColor:b,handleSampleColor:x}=zu({isDarkMode:t,onChangeColor:r,setColorForExternalColor:p,setPendingExternalColor:c});return e!==i&&a(e),(0,go.jsx)(En.Provider,{value:"color-picker",children:(0,go.jsx)("div",{className:P(vp),children:(0,go.jsx)(ma,{onScroll:T,ref:l,className:wp,children:(0,go.jsx)("div",{className:Tp,children:(0,go.jsx)("div",{className:P(kp,Ip),children:(0,go.jsx)(jt,{onChange:b,color:y,colorModel:o,className:Rp,sampleColor:x,engine:n})})})})})})}function Du({isDarkMode:e,token:o,imageFill:t,value:r,colorStopSelection:n,pendingExternalColor:i,colorForExternalColor:a,setPendingExternalColor:l}){let s;return o?s=o.colorForMode(e):t?s="white":In(r)?s=r:s=r?.stops.find(p=>p.id===n)?.value||r?.stops[0]?.value||"transparent",i===s&&l(null),a[i??s]??s}function zu({isDarkMode:e,onChangeColor:o,selection:t,colorStopSelection:r,setColorForExternalColor:n,setPendingExternalColor:i}){let a=O(),l=(0,ye.useCallback)((c,C,g)=>{if(ct(c))return;let y=c,T=Ye(y);if(T){let x=je(y),m=x?Po(x,a.tree):null;m&&(y=m.colorForMode(e))}let b=Y.isP3String(y)?y:G.toRgbString(y);n({[b]:y}),i(b),queueMicrotask(()=>{o(T?c:b,C,g)})},[e,o,n,i]),s=(0,ye.useCallback)((c,C=!0)=>{p(t),l(c,r,C)},[t,r,l]),p=(0,ye.useCallback)(c=>{if(!c)return;a.tree.getNodes(c).some(y=>Sn(y)&&y.resolveValue("opacity")===0)&&vt({type:"add",variant:"info",icon:"color-wheel",primaryText:"Increase layer opacity",secondaryText:"to see changes.",key:"color-change-null-opacity",duration:3e3})},[]),d=(0,ye.useCallback)(()=>{wt(a).then(a.scheduler.wrapHandler(c=>{c&&s(c)})).catch(yo)},[s]);return{handleChangeColor:s,handleSampleColor:d}}var _u="framerComponentPresetProps",Sp;async function Gu(e){if(wn.isTest)return[];let o=[lt.codeblock,lt.youtube,lt.vimeo],{modules:t}=await e.stores.modulesStore.lookUpModules(o.map(ni));return o.map((r,n)=>{let i=t[n];k(i,"Can't find module"),k(r,"Component is undefined"),k(i.files.module,"Module file is not set");let a=vn(i.id,i.saveId,i.files.module,"exportSpecifier"in r&&Gn(r.exportSpecifier)?r.exportSpecifier:"default");return{name:r.title,moduleId:i.id,componentIdentifier:a.value}})}function Uu(e){return Sp??=Gu(e),Sp}function Lu(e){let o=[],t=xi.getModuleNodes(e.tree);for(let r of t)r.annotations&&_u in r.annotations&&o.push({name:r.title,moduleId:r.id,componentIdentifier:r.codeComponentIdentifier});return o}function qu(e,o){let t=new Set;for(let r of o)t.add(r.moduleId);return e.filter(r=>!t.has(r.moduleId)).concat(o).sort((r,n)=>r.name.localeCompare(n.name))}async function SP(e){let o=await Uu(e),t=Lu(e);return qu(o,t)}var Yt=u(L(),1);var Op=u(h(),1),_P=(0,Yt.memo)(function(o){let t=Zu(),{value:r}=Ku(o.value,t);return lr(B(r),"value must be a string"),(0,Op.jsx)(Vp,{...o,colorModel:t.colorModel,isDarkMode:t.isDarkMode,value:r,onChangeColor:o.onChange})});function Hu(e){return"selection"in e&&"selectedGradientStopId"in e}function Ku(e,o){let t=O(),r,n=null;if(B(e)?r=e:Hu(o)?r=e.stops.find(({id:i})=>i===o.selectedGradientStopId)?.value??"transparent":r="transparent",Ye(r)){let i=je(r),a=i?Po(i,t.tree):null;rt(a)&&(n=a),n||(e=at(r)||"transparent")}return{value:e,token:n}}function Zu(){let e=O();lr(wi(e),"engine must be an on page engine");let o=wo(()=>e.stores.persistedUserDefaults.colorModel,[],e.stores.persistedUserDefaults);return(0,Yt.useMemo)(()=>({colorModel:o,isDarkMode:!0}),[o])}var Wp=u(L(),1);var Np="ia3rrjn";var Mp=u(h(),1);function Ep({className:e,children:o,...t}){return(0,Mp.jsx)("div",{className:P(Np,e),...t,children:o})}var er=u(h(),1),un=/\[([^\]]+)\]\((https?:\/\/[\w./?=#%&-]+)\)/gu,dn=/\*([^*]+)\*/gu,Qt=/(\n)/gu;function Zo(e,o,t=0,r=[un,dn,Qt]){let[n,i]=r.map(s=>(s.lastIndex=t,s.exec(e))).reduce((s,p,d)=>{let[c]=s;if(c&&p){if(c.index<p.index)return s}else if(c)return s;return[p,r[d]]},[null,void 0]);if(!n||!i)return t===e.length?[]:[e.substring(t)];let a=[];n.index-t>0&&a.push(e.substring(t,n.index));let l=i.lastIndex;if(i===un){let[s,p,d]=n,c=Zo(p,o,0,[dn,Qt]);a.push((0,er.jsx)("a",{href:d,target:"_blank",...o,children:c},n.index))}if(i===dn){let[s,p]=n,d=Zo(p,o,0,[un,Qt]);a.push((0,er.jsx)("em",{children:d},n.index))}return i===Qt&&a.push((0,er.jsx)("br",{},n.index)),a.push(...Zo(e,o,l)),a}var Fp="d1ykgdi6",Bp="w1wgf3m";var mn=u(h(),1),rv=Wp.default.memo(function({fullWidth:o=!1,withMargin:t=!0,description:r}){let n=ht(void 0),i=Zo(r,{tabIndex:n});return(0,mn.jsx)(We,{title:o?void 0:" ",children:(0,mn.jsx)(Ep,{className:P(Fp,t?Bp:void 0,o?Ha:pe),children:i})})});export{ed as a,La as b,Vt as c,qa as d,Mr as e,pe as f,Ha as g,Fr as h,Qa as i,Yd as j,gm as k,bm as l,ym as m,hm as n,xm as o,Cm as p,Pm as q,vm as r,rc as s,wm as t,Tm as u,km as v,Im as w,Rm as x,Vm as y,Sm as z,Om as A,Nm as B,Em as C,fs as D,hs as E,xs as F,Cs as G,Ts as H,Sf as I,fc as J,Of as K,Ge as L,Nf as M,yc as N,ks as O,Is as P,tc as Q,os as R,Wr as S,Ar as T,Ns as U,Oc as V,Nc as W,As as X,Ds as Y,ko as Z,We as _,zg as $,Zs as aa,jg as ba,Qs as ca,D as da,Ob as ea,At as fa,Hb as ga,Gt as ha,Kl as ia,fu as ja,Zl as ka,Rl as la,_t as ma,Pl as na,jb as oa,Xu as pa,Ut as qa,iu as ra,_x as sa,Yr as ta,Ae as ua,my as va,jt as wa,vp as xa,nP as ya,iP as za,wp as Aa,Tp as Ba,kp as Ca,Rp as Da,Du as Ea,zu as Fa,Uu as Ga,Lu as Ha,qu as Ia,SP as Ja,_P as Ka,Ku as La,Ep as Ma,rv as Na,Ga as Oa,Yu as Pa,Yc as Qa,wy as Ra,Wl as Sa,Al as Ta,Mh as Ua,_h as Va,Iy as Wa,Ry as Xa};
//# sourceMappingURL=chunk-ZMVO4XKS.mjs.map
