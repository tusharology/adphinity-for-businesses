import{p as H}from"chunk-OBUCKN56.mjs";import{a as S,b as L,g as V,j as v,l as W}from"chunk-CMAEAGWD.mjs";import{a as q,b as F}from"chunk-JB2N3EQZ.mjs";import{g as M}from"chunk-4X7KIAE7.mjs";import{da as I,p as y}from"chunk-EEV263O3.mjs";import{e as b,j as f}from"chunk-AHQIRSXG.mjs";function k(t){return t in N}function x(t){return t in z}var c=H.isOn("agent"),N={importFigma:"CommandOrControl+Shift+I",newProject:"Option+CommandOrControl+N",publishSite:"CommandOrControl+Shift+P",openPublishedSite:"CommandOrControl+Shift+O",uploadImage:"Option+CommandOrControl+I",quickActions:"CommandOrControl+K",toggleLocalization:c?"":"CommandOrControl+Shift+L",toggleContentManagement:c?"":"Option+C",showAgent:c?"A":"",openCanvas:c?"Option+1":"",openCMS:c?"Option+2":"",openLocalization:c?"Option+3":"",openAnalytics:c?"Option+4":"",openSettings:c?"Option+5":"Shift+,",toggleVersionHistory:"Shift+CommandOrControl+H",generateWebPage:c?"":"W",undo:"CommandOrControl+Z",redo:"CommandOrControl+Shift+Z",goBack:"CommandOrControl+[",goForward:"CommandOrControl+]",cut:"CommandOrControl+X",copy:"CommandOrControl+C",copyFill:"CommandOrControl+Shift+C",paste:"CommandOrControl+V",delete:"Delete",selectMostRecentPage:"Option+Escape",selectAll:"CommandOrControl+A",selectGroundNode:"CommandOrControl+Escape",selectParent:"Escape",copyStyle:"CommandOrControl+Option+C",pasteStyle:"CommandOrControl+Option+V",pasteInPlace:"CommandOrControl+Shift+V",duplicate:"CommandOrControl+D",toggleLayerLock:"CommandOrControl+L",toggleLayerVisible:"CommandOrControl+;",rename:"CommandOrControl+R",renameLayers:"Option+R",selectSiblings:"CommandOrControl+Shift+A",cycleSelection:"Tab",decycleSelection:"Shift+Tab",fakeSelectChildren:"Enter",zoomIn:"CommandOrControl+Plus",zoomOut:"CommandOrControl+-",resetZoom:"CommandOrControl+0",zoomToFitAll:"CommandOrControl+1",zoomToFitSelection:"CommandOrControl+2",openPanelSearch:"CommandOrControl+F",toggleInterface:"CommandOrControl+.",toggleRulers:"Control+R",toggleGrids:"Control+G",toggleAppearance:"Control+Command+N",showPages:c?"":"Option+1",showLayers:c?"":"Option+2",showAssets:c?"":"Option+3",collapseLayers:"Option+L",startLinkTool:"L",sampleColor:"Control+C",toggleInsert:"I",toggleLibraryModal:"CommandOrControl+/",toolCreateStack:"S",toolCreateFrame:"F",toolCreateRounded:"U",toolCreateImage:"Shift+I",toolCreateVideo:"Shift+V",toolCreateText:"T",toolComment:"C",toolChat:"/",toolZoom:"Z",toolPath:"P",toolScale:"K",toolCreateRectangleShape:"R",toolCreateOvalShape:"O",toolCreateRows:"Shift+R",toolCreateColumns:"Shift+C",toolCreateGrid:"Shift+G",toolCreateMasonry:"Shift+M",toolAgentPanel:c?"Control+A":"",addEnclosingFrame:"CommandOrControl+Return",addEnclosingStack:"CommandOrControl+Option+Return",autoSizeLayout:"Shift+A",removeFramePreservingChildren:"CommandOrControl+Delete",sizeToFitContent:"Control+Option+R",moveForward:"CommandOrControl+Option+Up",moveBackward:"CommandOrControl+Option+Down",moveToFront:"]",moveToBack:"[",alignLeft:"Option+A",alignCenter:"Option+H",alignRight:"Option+D",alignTop:"Option+W",alignMiddle:"Option+V",alignBottom:"Option+S",distributeHorizontal:"Control+Option+H",distributeVertical:"Control+Option+V",unite:"Option+Shift+U",subtract:"Option+Shift+S",intersect:"Option+Shift+I",exclude:"Option+Shift+E",join:"Option+Shift+J",saveCodeFile:"CommandOrControl+S",makeBold:"CommandOrControl+B",makeItalic:"CommandOrControl+I",makeUnderlined:"CommandOrControl+U",chooseFontFamily:"CommandOrControl+T",group:"CommandOrControl+G",ungroup:"CommandOrControl+Shift+G",makeComponent:"CommandOrControl+Option+K",makeCodeComponent:"CommandOrControl+Shift+K",showPreview:"CommandOrControl+P",openFullScreen:"CommandOrControl+Shift+F",toggleHighlightsInLivePreview:"CommandOrControl+Shift+H",reload:"CommandOrControl+R",toggleConsole:"CommandOrControl+I",handleResponsive:"Z",togglePreviewInterface:"CommandOrControl+Shift+F",previewNextBreakpoint:"CommandOrControl+.",previewPreviousBreakpoint:"CommandOrControl+,",runRecentPlugin:"CommandOrControl+Option+P",openDevelopmentPlugin:"CommandOrControl+Option+L",openTextSearchPlugin:"CommandOrControl+Shift+F",saveSiteSettings:"CommandOrControl+S",previousCollectionItem:"CommandOrControl+Up",nextCollectionItem:"CommandOrControl+Down",newCollectionItem:"N",pasteCollection:"CommandOrControl+V"},z={sampleColor:"",selectGroundNode:"",openFullScreen:"Control+Alt+F",resetZoom:"Shift+0",zoomToFitAll:"Shift+1",zoomToFitSelection:"Shift+2",toggleInterface:"Alt+.",toggleRulers:"Control+Shift+R",toggleGrids:"Alt+G",toggleAppearance:"Alt+N",toolAgentPanel:c?"Control+Alt+A":"",distributeHorizontal:"Alt+Shift+H",distributeVertical:"Alt+Shift+V"},tt=(t,n)=>{let a=k(t)?N[t]:void 0,i=x(t)?z[t]:void 0;return(n?.platform??(y()?"mac":"windows"))==="windows"?i??a:a};function J(t,n,a=[]){let i=[];for(let[e,o]of t.entries()){if(!v(o.submenu)&&!V(o.submenu))continue;let{submenu:s,...m}=o,h=a?[...a,e]:[e],r={...m,path:h};if(r.type==="separator"){if(e===0||e===t.length-1||i[i.length-1]?.type==="separator")continue;i.push(r);continue}if(o.role&&n?.validateAction){let{states:p,options:u}=n.validateAction(o.role),d=p[o.role],{label:C,checked:T,visible:R}=u[o.role]??{};L(C)&&(r.label=C),v(o.checked)&&S(T)&&(r.checked=T),v(o.visible)&&S(R)&&(r.visible=R),v(o.enabled)&&S(d)&&(r.enabled=d)}if(o.visible===!1)continue;if(s){let p=J(s,n,h),u={...r,submenu:p};i.push(u);continue}let l=X(r,n);i.push(l)}return i.length>0&&i[i.length-1]?.type==="separator"&&i.pop(),i.length>0&&i[0]?.type==="separator"&&i.shift(),i}function X(t,n){if(!n)return t;let{appAccelerators:a,appAcceleratorsWindows:i}=n;if(!a||!i)return t;let{role:e}=t;if(!e)return t;let o={...t};return!y()&&!t.acceleratorWindows&&(o.acceleratorWindows=x(e)?i[e]:void 0),t.accelerator||(o.accelerator=k(e)?a[e]:void 0),o}var Q=I("wantsNativeTextActions");function D(t=document.activeElement){if(!(t instanceof HTMLElement))return!1;if(t.classList.contains("wantsNativeTextAction")||t instanceof HTMLIFrameElement)return!0;if(t instanceof HTMLInputElement)switch(t.type){case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"text":case"time":case"url":case"week":return!0;case"checkbox":case"color":case"file":case"image":case"radio":case"range":case"reset":case"submit":return!1;default:return Q.reportErrorOncePerMinute("Unhandled input type: "+t.type),!1}if(t instanceof HTMLTextAreaElement)return!0;let n=t instanceof HTMLAnchorElement?t:t.closest("a");return n instanceof HTMLAnchorElement&&n.href?!0:t.isContentEditable}var A=b(q(),1);var K=b(F(),1);function P(t){return t.wantsActions?t.wantsActions():!0}function E(t,n,a){return t.wantsAction?t.wantsAction(n,a):!0}function G(t,n){return t.optionsForAction?t.optionsForAction(n):void 0}var U;(i=>{function t(e){return new a(e)}i.chain=t;function n(e,o){return e&&e instanceof a?e.actionToTargetMap[o]:e}i.functionTarget=n;class a{constructor(o){f(this,"actionToTargetMap",{});f(this,"wantedActions",[]);this.then(o)}then(o){this.wantedActions=this.wantedActions.concat(o.wantedActions);let s=this.actionToTargetMap,m=o.wantedActions;for(let h of m)s[h]=s[h]||o;return this}wantsAction(o,s){let m=this.actionToTargetMap[o];return!m||!P(m)?!1:E(m,o,s)}optionsForAction(o){let s=this.actionToTargetMap[o];if(s)return G(s,o)}}})(U||={});var g=class extends Event{constructor(){super(...arguments);f(this,"actionIdentifier");f(this,"actionArgument")}};f(g,"eventType","vekter-action-dispatch-event");var O=class extends Event{constructor(){super(...arguments);f(this,"invalidatedActions");f(this,"validatedActionStates");f(this,"validatedActionOptions")}};f(O,"eventType","vekter-action-validation-event");function dt({target:t,engine:n,children:a,style:i,global:e}){let o=(0,A.useRef)(null),s=(0,A.useCallback)(r=>{let l=r.actionIdentifier;if(!l)return;let p=U.functionTarget(t,l);if(!p||!p.wantedActions.includes(l)||!P(p))return;let u=p[l];if(!W(u))return;let d=E(p,l,r);if(!d||(r.preventDefault(),r.stopPropagation(),d!==!0))return;n.setEditReason(l);let C=u.bind(p);n.scheduler.wrapHandler(C)(r.actionArgument)},[n,t]),m=(0,A.useCallback)(r=>{let{invalidatedActions:l,validatedActionStates:p,validatedActionOptions:u}=r;if(!(!l||!p||!u)&&t){for(let d of t.wantedActions)if(l.has(d)){l.delete(d);let C=P(t)?E(t,d,r):!1;if(p[d]=C,C===!0||C===!1){let T=G(t,d);T&&(u[d]=T)}}l.size===0&&(r.preventDefault(),r.stopPropagation())}},[t]);(0,A.useEffect)(()=>{if(!o.current)return;let r=(e?document.documentElement:null)||o.current;return r.addEventListener(g.eventType,s),r.addEventListener(O.eventType,m),()=>{r.removeEventListener(g.eventType,s),r.removeEventListener(O.eventType,m)}},[e,s,m]);let h=(0,A.useCallback)(r=>{!D(r.target)&&!M.isDebugBuild&&r.preventDefault()},[]);return(0,K.jsx)("div",{ref:o,onContextMenu:h,style:i,children:a})}function mt(t,n){let a=document.activeElement;if(!a)throw Error("No active element for action dispatch");let i=new g(g.eventType,{bubbles:!0});return i.actionIdentifier=t,i.actionArgument=n,a.dispatchEvent(i)}function Y(t){let n=document.activeElement;if(!n)throw Error("No active element for action validation");let a=new Set;for(let s of t)a.add(s);let i={},e={},o=new O(O.eventType,{bubbles:!0});return o.invalidatedActions=a,o.validatedActionStates=i,o.validatedActionOptions=e,n.dispatchEvent(o),{states:i,options:e}}var Z=[],j=[];function ft(t){Z.push(t)}function ut(t){j.push(t)}function Ct(t){let n=t==="*"?Object.keys(w):[t];Z.forEach(e=>e());let{states:a,options:i}=Y(n);Object.assign(w,a),Object.assign(B,i);for(let e of n)w[e]=a[e]||(e==="undo"||e==="redo"||e==="delete"?"native":!1);return j.forEach(e=>e()),{states:w,options:B}}var w={},B={};export{D as a,U as b,dt as c,mt as d,ft as e,ut as f,Ct as g,N as h,z as i,tt as j,J as k};
//# sourceMappingURL=chunk-4J3SNVLD.mjs.map
