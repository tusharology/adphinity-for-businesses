import{g as b}from"chunk-3P5EKKEE.mjs";import{d as w}from"chunk-CUF77MRM.mjs";import{s as C,v}from"chunk-VHBQVA4D.mjs";import{p as I}from"chunk-OBUCKN56.mjs";function R(s,r,n,c,o){if(r.pages>(n.maxPages??1/0))return"pages";if(r.cmsCollections>(n.maxCmsCollections??1/0))return"cmsCollections";if(r.cmsItems>(n.maxCmsItems??1/0))return"cmsItems";if(r.locales>(n.maxLocales??1/0))return"locales";let p=c!=="free"?o?.maxEditors??n.maxEditors:n.maxEditors;if(r.editors>(p??1/0))return"editors";if(s!=="freeSite"&&r.abTests>(n.maxAbTests??1/0))return"abTests";if(I.isOn("publishBandwidthBlock")){let l=n.maxBandwidthInGB??1/0,{previousMonth:e,twoMonthsAgo:i,currentMonth:d}=r.bandwidthInGB,T=e>l&&i>l,f=e>l&&d>l;if((T||f)&&!(b===l))return"bandwidth"}}var F={pages:"You currently have more pages than this plan allows for.",cmsCollections:"You currently have more CMS collections than this plan allows for.",cmsItems:"You currently have more CMS items than this plan allows for.",locales:"You currently have more locales than this plan allows for.",editors:"You currently have more editors in your project than this plan allows for.",abTests:"You currently have more A/B tests in your project than this plan allows for.",bandwidth:"Your current bandwidth usage exceeds this plan\u2019s limit."};function G(s){return F[s]}var E=(t=>(t.fileUploadLimitInMB="fileUploadLimitInMB",t.pages="pages",t.cmsCollections="cmsCollections",t.cmsItems="cmsItems",t.localeAddon="localeAddon",t.abTests="abTests",t.trackingEventsLimit="trackingEventsLimit",t.translatableWords="translatableWords",t.bandwidthInGB="bandwidthInGB",t.canUseFunnels="canUseFunnels",t.canUseTriggers="canUseTriggers",t.canInviteEditors="canInviteEditors",t.canPublishToCustomDomain="canPublishToCustomDomain",t.canUseBatchAITranslation="canUseBatchAITranslation",t.canUseCustomCanonicalUrl="canUseCustomCanonicalUrl",t.canUseCustomLocaleRegions="canUseCustomLocaleRegions",t.canUseEditorPermissions="canUseEditorPermissions",t.canUsePasswordProtection="canUsePasswordProtection",t.canUseRedirects="canUseRedirects",t.canUseStagingEnvironment="canUseStagingEnvironment",t.canUseUTMTracking="canUseUTMTracking",t.canUseWellKnown="canUseWellKnown",t.customDomainRecoverUpsell="customDomainRecoverUpsell",t.domainToBuyUpsell="domainToBuyUpsell",t))(E||{});function z(s){return s in E}function $(s,r){return s!==null?s:r.abTests>0?"abTests":null}function u(s,r,n){return s.find(({resourceLimits:c})=>(c[n]??1/0)>(r[n]??1/0))?.licenseType??null}function a(s,r,n){return s.find(({featureFlags:c})=>c[r]===n)?.licenseType??null}function _(s,r,n,c,o,p){let e=n.filter(({licenseType:i})=>v(i,r)&&C(i)&&i!=="basicSite2025").filter(({resourceLimits:i,licenseType:d})=>!R(r,p,i,c,o)&&d!=="enterpriseSite");switch(s){case"pages":return u(e,o,"pages");case"fileUploadLimitInMB":return u(e,o,"fileUploadLimitInMB");case"cmsCollections":return u(e,o,"cmsCollections");case"cmsItems":return u(e,o,"cmsItems");case"canUseEditorPermissions":return a(e,"canUseEditorPermissions","on");case"canPublishToCustomDomain":case"customDomainRecoverUpsell":case"domainToBuyUpsell":return a(e,"canPublishToCustomDomain","on");case"canInviteEditors":return u(e,o,"maxEditors");case"translatableWords":case"localeAddon":return u(e,o,"maxLocales");case"canUseBatchAITranslation":return a(e,"canUseBatchAITranslation","on");case"canUseUTMTracking":return a(e,"canUseUTMTracking","on");case"canUseFunnels":return a(e,"canUseFunnels","upsell");case"canUseTriggers":return a(e,"canUseTriggers","upsell");case"abTests":return u(e,o,"maxAbTests");case"trackingEventsLimit":return u(e,o,"maxTrackingEventsLimit");case"canUseRedirects":return a(e,"canUseRedirects","on");case"canUseCustomCanonicalUrl":return a(e,"canUseCustomCanonicalUrl","upsell");case"canUseCustomLocaleRegions":return a(e,"canUseCustomLocaleRegions","on");case"canUsePasswordProtection":return a(e,"canUsePasswordProtection","on");case"canUseStagingEnvironment":return a(e,"canUseStagingEnvironment","on");case"canUseWellKnown":return a(e,"canUseWellKnown","on");case"bandwidthInGB":return u(e,o,"bandwidthInGB")}}var A=/[.!?â€¦]+$/u;function B(s){return s.replace(A,"")}var x=1e3*1024,P=150*x;function j(s){return s*x}async function q({endpoint:s,fieldName:r,file:n,icon:c,onToast:o,customMaxSize:p,onExceedsCustomMaxSize:l,getErrorMessage:e}){let i=`upload${Math.random()}`,d=p?j(p):P;if(n.size>d){if(d<P&&l)l(n.size);else{let m=new Intl.NumberFormat("en",{style:"unit",unit:"megabyte"}).format(p??P/x);o({type:"add",key:i,variant:"error",primaryText:"File exceeds",secondaryText:`limit of ${m}.`,duration:1e4,icon:"error",moveToTop:!0})}return null}let T=0,f=!1,y=!1,h=95,S=100/h;try{let m=await w(s,{[r]:n},L=>{if(y)return;let g=Math.round(L*h);if(g===T)return;T=g;let U=Math.round(T*S*.95);!f&&U>=90||(f=!0,o({type:"add",key:i,variant:"progress",icon:c,text:`Uploading ${n.name}\u2026 ${U}%`,duration:1/0,showCloseButton:"never"}))});return y=!0,o({type:"add",key:i,variant:"success",primaryText:n.name,secondaryText:"has been uploaded.",duration:1e4,icon:"success",moveToTop:!0}),m}catch(m){y=!0;let L=m instanceof Error?e?.(m)??m.message:String(m),g=B(L.trim()),U=g?`${g}.`:"Please try again.";return o({type:"add",key:i,variant:"error",primaryText:"Upload error.",secondaryText:U,duration:3e4,icon:"error",moveToTop:!0}),null}}export{R as a,G as b,z as c,$ as d,_ as e,B as f,x as g,q as h};
//# sourceMappingURL=chunk-CHLWPW46.mjs.map
