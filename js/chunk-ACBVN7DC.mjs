import{A as me,Wa as fe,Xa as ge,c as le,o as ce}from"chunk-YYR6HUOW.mjs";import{_ as pe,da as ue,ga as de}from"chunk-Q4D332IP.mjs";import{w as se}from"chunk-UZGX3Y4P.mjs";import{a as M}from"chunk-MAOAHTTI.mjs";import{a as N}from"chunk-J6R4FKJ3.mjs";import{Aa as ae}from"chunk-VHQJLQ3M.mjs";import{M as ie}from"chunk-VHBQVA4D.mjs";import{ca as re,da as te,ed as ne}from"chunk-BMVMSSVG.mjs";import{Ee as ee,Ge as oe,H as K,nf as L}from"chunk-ZXJMCM2S.mjs";import{b as _}from"chunk-SOM3QFWS.mjs";import{i as w}from"chunk-26DHASNB.mjs";import{Ak as Y,Ik as Z,fb as q,gc as $,hc as P,od as J,vb as C,vk as c,wb as T,xk as Q,yk as X}from"chunk-SF5446RK.mjs";import{b as y,j}from"chunk-CMAEAGWD.mjs";import{a as U,b as O}from"chunk-JB2N3EQZ.mjs";import{ha as G,ia as x}from"chunk-EEV263O3.mjs";import{e as k}from"chunk-AHQIRSXG.mjs";var be=k(U(),1),Le={type:"add",variant:"info",icon:"color-wheel",action:{title:"Install",onClick:ie},primaryText:"Use latest desktop app",secondaryText:"to sample colors.",key:"install-desktop-app",duration:5e3,showCloseButton:"never"};function Ne({channel:n,toast:o}){(0,be.useEffect)(()=>{if(!n)return;let r={async sampleColor(){return window.EyeDropper?{color:(await new window.EyeDropper().open().catch(d=>{if(d?.name==="AbortError")return{sRGBHex:void 0};throw d})).sRGBHex}:(o(Le),{})}};return N.on(n).register(r)},[n,o])}var h=k(U(),1);var l=k(O(),1),v="link",Pe=["*"];function I(n){return`computed-link-${n}`}var Do=h.default.memo(function({control:o,controlKey:r,controlProp:m,onChange:f,onContextMenu:d,sortable:p,traitTypeKeys:g,onDelete:V,supportsVariables:b=!1,supportsComputedValues:R=!1,supportsFetchDataValues:S=!1,nodeIds:F}){let i=_(),E=(0,h.useMemo)(()=>F??[],[F]),he=(0,h.useMemo)(()=>me(r||Z()),[r]),{value:a}=m,e=P(a)||c(a)?a:G,u=t=>{f(r,s=>({...s,value:t}),E),le(e,t)},D=t=>{let{defaultValue:s}=o;return y(s)?s:t},ke=()=>{let t=D();j(t)&&u(t)},ye=()=>{u(void 0)},Ce=i.scheduler.wrapHandler(t=>{let s=o.title||C(r),Te=y(e)?e:D("");i.beginUndoGroup();let A=ae({engine:i,scopeId:t,type:v,name:s,initialValue:Te});A&&u(A),i.endUndoGroup()}),B=i.scheduler.wrapHandler(()=>{P(e)&&u(void 0)}),we=i.scheduler.wrapHandler(()=>{let t=q({type:"link",value:c(a)?a:void 0}),s=$("link",t,[]);return z(s),s}),z=i.scheduler.wrapHandler(t=>{u(t),se.navigation.presentPopout(I(r))}),ve=p?void 0:o.title||C(r),H=D(),W=!T(e)&&!c(e),Ve=fe(i,e),De=Ie(i,e),xe=y(H)&&c(a)&&!Y(a,X({url:H}));return(0,l.jsx)(pe,{title:ve,onContextMenu:d,onResetToDefault:ke,resetToDefaultEnabled:xe,variableType:M[v],allowedFileTypes:Pe,variableCreationType:v,onCreateVariable:Ce,onRemoveDynamicValue:B,dynamicValue:P(a)?a:null,onSelectVariable:u,traitTypeKeys:g,withReorderControl:p,reorderColumnCount:2,onDelete:V,supportsVariables:b,supportsComputedValues:R,computedValuePopoutId:I(r),onSelectComputedValue:z,supportsFetchDataValues:S,onSelectFetchDataValue:we,children:P(e)?(0,l.jsx)(ce,{title:o.title||C(r),value:e,outputControl:o,expectedType:M[v],allowedFileTypes:Pe,popoutId:I(r),onRemove:B,onChangeDynamicValue:u,nodeIds:E,supportsComputedValues:R,supportsFetchDataValues:S,controlReferenceInfo:void 0}):(0,l.jsx)(de,{id:he,sortable:p,popout:(0,l.jsx)(ge,{link:x(e)?void 0:e,onChange:u,supportsVariables:b,supportsPageLinks:Me(i),supportsSlugVariables:b}),navigationTitle:"Link",displayDivider:!0,title:x(e)?"Add\u2026":Ve,preview:(0,l.jsx)(ue,{background:W?w.swatchBackgroundPlaceholderForLink:w.swatchBackgroundForLink,children:De??(0,l.jsx)(ne,{})}),onDelete:c(e)?ye:void 0,titleColor:W?w.inputLabel:void 0})})});function Me(n){if(!K(n))return!0;let{scopeType:o}=n.stores.scopeStore;switch(o){case"CanvasPage":case"DesignPage":return!1;default:return!0}}function Ie(n,o){if(!Q(o))return;let{webPageId:r,pathVariables:m}=o;if(!m)return;let f=n.tree.getNodeWithTrait(r,J);if(!f)return;let d=n.componentLoader.dataForIdentifier(f.dataIdentifier);if(!d)return;let p=d.annotations?.framerSlug;if(!p)return;let g=m[p];if(!T(g))return;let V=L(ee,p);if(g.id===V)return(0,l.jsx)(te,{});let b=L(oe,p);if(g.id===b)return(0,l.jsx)(re,{})}export{Ne as a,Do as b};
//# sourceMappingURL=chunk-ACBVN7DC.mjs.map
